<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šå·´èƒºè‹±èªå–®å­—å¡ - å­—æ¯E</title>
    <style>
        :root {
            /* å¤šå·´èƒºè‰²ç¥¨ Dopamine Palette */
            --bg-color: #FFFBEB; /* æŸ”å’Œé»ƒåº• */
            --card-front: #FFDE59; /* äº®é»ƒ */
            --card-back: #7ED957; /* é®®ç¶  */
            --text-primary: #333;
            --btn-master: #FF5757; /* çŠç‘šç´… */
            --btn-learn: #5CE1E6; /* äº®é’ */
            --btn-arrow: #CB6CE6; /* ç´«è‰² */
            --btn-reset: #FF9F1C; /* é®®æ©˜è‰² */
        }

        body {
            font-family: "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            position: relative;
        }

        /* å³ä¸Šè§’é‡ç½®æŒ‰éˆ• */
        .reset-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: var(--btn-reset);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
            transition: transform 0.1s;
            z-index: 100;
        }

        .reset-btn:active {
            transform: translateY(2px);
            box-shadow: none;
        }

        /* å¡ç‰‡å®¹å™¨èˆ‡ç¿»è½‰æ•ˆæœ */
        .card-container {
            width: 90%;
            max-width: 400px;
            height: 500px;
            perspective: 1000px;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
            border-radius: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 30px;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
            border: 5px solid #fff;
        }

        /* æ­£é¢è¨­è¨ˆ */
        .card-front {
            background-color: var(--card-front);
            color: var(--text-primary);
        }

        /* å–‡å­åœ–ç¤ºæ¨£å¼ */
        .speaker-icon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 3rem; /* åœ–ç¤ºå¤§å° */
            cursor: pointer;
            background: rgba(255,255,255,0.4);
            width: 60px;
            height: 60px;
            line-height: 60px;
            border-radius: 50%;
            transition: transform 0.2s, background 0.2s;
            z-index: 50; /* ç¢ºä¿å®ƒåœ¨æœ€ä¸Šå±¤ */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .speaker-icon:hover {
            transform: scale(1.1);
            background: rgba(255,255,255,0.8);
        }

        .speaker-icon:active {
            transform: scale(0.95);
        }

        .english-word {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            color: #FF6B6B;
            text-shadow: 2px 2px 0px #FFF;
        }

        .pos-tag {
            background: #FFF;
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #555;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
        }

        /* èƒŒé¢è¨­è¨ˆ */
        .card-back {
            background-color: var(--card-back);
            color: var(--text-primary);
            transform: rotateY(180deg);
        }

        .chinese-def {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #FFF;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
        }

        .example-sentence {
            font-size: 1.4rem;
            line-height: 1.6;
            background: rgba(255,255,255,0.3);
            padding: 15px;
            border-radius: 15px;
            white-space: pre-wrap; /* è®“ä¾‹å¥ä¸­çš„æ›è¡Œç¬¦è™Ÿç”Ÿæ•ˆ */
        }

        /* æ§åˆ¶å€ */
        .controls {
            display: flex;
            gap: 20px;
            align-items: center;
            width: 90%;
            max-width: 400px;
            justify-content: space-between;
        }

        .arrow-btn {
            background: var(--btn-arrow);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }

        .action-btn {
            border: none;
            padding: 15px 25px;
            border-radius: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
            flex: 1;
        }

        .btn-master { background-color: var(--btn-master); }
        .btn-learn { background-color: var(--btn-learn); color: #333; }
        
        button:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .progress {
            margin-top: 20px;
            font-size: 1rem;
            color: #888;
        }
        
        .empty-state {
            display: none;
            text-align: center;
            font-size: 1.5rem;
            color: #333;
        }

    </style>
</head>
<body>

    <button class="reset-btn" onclick="confirmReset()">ğŸ”„ å…¨éƒ¨é‡ä¾†</button>

    <div class="progress">é€²åº¦ï¼š<span id="current-index">0</span> / <span id="total-count">0</span></div>

    <div class="card-container" id="card-container" onclick="flipCard()">
        <div class="card" id="card">
            <div class="card-face card-front">
                <div class="speaker-icon" onclick="playAudio(event)">ğŸ”Š</div>
                
                <div class="english-word" id="word"></div>
                <div class="pos-tag" id="pos"></div>
                <div style="margin-top:20px; font-size: 0.9rem; opacity: 0.7;">(é»æ“Šå¡ç‰‡ç¿»é¢)</div>
            </div>
            <div class="card-face card-back">
                <div class="chinese-def" id="def"></div>
                <div class="example-sentence" id="sentence"></div>
            </div>
        </div>
    </div>
    
    <div class="empty-state" id="empty-state">
        <h2>ğŸ‰ å¤ªæ£’äº†ï¼</h2>
        <p>æ‰€æœ‰å–®å­—éƒ½å·²ç²¾ç†Ÿï¼</p>
        <button class="action-btn btn-learn" onclick="resetProgress()">é‡æ–°é–‹å§‹</button>
    </div>

    <div class="controls" id="controls">
        <button class="arrow-btn" onclick="prevCard()">&#8592;</button>
        <button class="action-btn btn-master" onclick="markMastered()">ğŸ’– å·²ç²¾ç†Ÿ</button>
        <button class="action-btn btn-learn" onclick="markLearning()">ğŸ’ª å­¸ç¿’ä¸­</button>
        <button class="arrow-btn" onclick="nextCard()">&#8594;</button>
    </div>

    <script>
        // è³‡æ–™ä¾†æºï¼šå­—æ¯E å–®å­—åˆ—è¡¨
        const vocabData = [
            { word: "each", pos: "adj./pron.", def: "æ¯ä¸€å€‹", ex: "Each student has a book. (æ¯å€‹å­¸ç”Ÿéƒ½æœ‰ä¸€æœ¬æ›¸ã€‚)" },
            { word: "eagle", pos: "noun", def: "è€é·¹", ex: "The eagle is flying high. (è€é·¹é£›å¾—å¾ˆé«˜ã€‚)" },
            { word: "ear", pos: "noun", def: "è€³æœµ", ex: "She has small ears. (å¥¹çš„è€³æœµå¾ˆå°ã€‚)" },
            { word: "early", pos: "adj./adv.", def: "æ—©çš„", ex: "I wake up early. (æˆ‘èµ·å¾—å¾ˆæ—©ã€‚)" },
            { word: "earn", pos: "verb", def: "è³ºå–", ex: "He earns a lot of money. (ä»–è³ºå¾ˆå¤šéŒ¢ã€‚)" },
            { word: "earring", pos: "noun", def: "è€³ç’°", ex: "She is wearing gold earrings. (å¥¹æˆ´è‘—é‡‘è€³ç’°ã€‚)" },
            { word: "earth", pos: "noun", def: "åœ°çƒã€æ³¥åœŸ", ex: "The Earth is round. (åœ°çƒæ˜¯åœ“çš„ã€‚)" },
            { word: "earthquake", pos: "noun", def: "åœ°éœ‡", ex: "The earthquake shook the house. (åœ°éœ‡éœ‡å‹•äº†æˆ¿å­ã€‚)" },
            { word: "ease", pos: "noun", def: "å®¹æ˜“ã€èˆ’é©", ex: "He passed the test with ease. (ä»–è¼•æ˜“åœ°é€šéäº†è€ƒè©¦ã€‚)" },
            { word: "east", pos: "noun/adj.", def: "æ±æ–¹", ex: "The sun rises in the east. (å¤ªé™½å¾æ±æ–¹å‡èµ·ã€‚)" },
            { word: "Easter", pos: "noun", def: "å¾©æ´»ç¯€", ex: "We hunt for eggs on Easter. (æˆ‘å€‘åœ¨å¾©æ´»ç¯€æ‰¾å½©è›‹ã€‚)" },
            { word: "easy", pos: "adj.", def: "å®¹æ˜“çš„", ex: "This question is easy. (é€™å€‹å•é¡Œå¾ˆç°¡å–®ã€‚)" },
            { word: "eat", pos: "verb", def: "åƒ", ex: "I like to eat pizza. (æˆ‘å–œæ­¡åƒæŠ«è–©ã€‚)" },
            { word: "edge", pos: "noun", def: "é‚Šç·£", ex: "Don't stand on the edge. (ä¸è¦ç«™åœ¨é‚Šç·£ã€‚)" },
            { word: "edit", pos: "verb", def: "ç·¨è¼¯", ex: "He is editing the video. (ä»–æ­£åœ¨ç·¨è¼¯å½±ç‰‡ã€‚)" },
            { word: "education", pos: "noun", def: "æ•™è‚²", ex: "Education is important. (æ•™è‚²å¾ˆé‡è¦ã€‚)" },
            { word: "effect", pos: "noun", def: "æ•ˆæœã€å½±éŸ¿", ex: "The medicine had a good effect. (é€™è—¥æœ‰å¾ˆå¥½çš„æ•ˆæœã€‚)" },
            { word: "effort", pos: "noun", def: "åŠªåŠ›", ex: "He put a lot of effort into his work. (ä»–æŠ•å…¥äº†å¾ˆå¤šåŠªåŠ›åœ¨ä»–çš„å·¥ä½œä¸Šã€‚)" },
            { word: "egg", pos: "noun", def: "è›‹", ex: "I had a boiled egg for breakfast. (æˆ‘æ—©é¤åƒäº†ä¸€é¡†æ°´ç…®è›‹ã€‚)" },
            { word: "eight", pos: "num.", def: "å…«", ex: "I have eight pens. (æˆ‘æœ‰å…«æç­†ã€‚)" },
            { word: "eighteen", pos: "num.", def: "åå…«", ex: "She is eighteen years old. (å¥¹åå…«æ­²ã€‚)" },
            { word: "eighty", pos: "num.", def: "å…«å", ex: "My grandfather is eighty. (æˆ‘çš„ç¥–çˆ¶å…«åæ­²ã€‚)" },
            { word: "either", pos: "adj./pron.", def: "å…©è€…ä¹‹ä¸€", ex: "You can take either road. (é€™å…©æ¢è·¯ä½ èµ°å“ªä¸€æ¢éƒ½è¡Œã€‚)" },
            { word: "elder", pos: "adj./noun", def: "å¹´é•·çš„ã€é•·è¼©", ex: "Respect your elders. (å°Šæ•¬ä½ çš„é•·è¼©ã€‚)" },
            { word: "elect", pos: "verb", def: "é¸èˆ‰", ex: "They elected him as president. (ä»–å€‘é¸ä»–ç•¶ç¸½çµ±ã€‚)" },
            { word: "election", pos: "noun", def: "é¸èˆ‰", ex: "The election is next week. (é¸èˆ‰åœ¨ä¸‹é€±ã€‚)" },
            { word: "electric", pos: "adj.", def: "é›»çš„", ex: "I bought an electric guitar. (æˆ‘è²·äº†ä¸€æŠŠé›»å‰ä»–ã€‚)" },
            { word: "electricity", pos: "noun", def: "é›»åŠ›", ex: "The storm cut off the electricity. (æš´é¢¨é›¨åˆ‡æ–·äº†é›»åŠ›ã€‚)" },
            { word: "element", pos: "noun", def: "è¦ç´ ", ex: "Trust is a key element of friendship. (ä¿¡ä»»æ˜¯å‹èª¼çš„é—œéµè¦ç´ ã€‚)" },
            { word: "elephant", pos: "noun", def: "å¤§è±¡", ex: "The elephant has a long trunk. (å¤§è±¡æœ‰é•·é•·çš„é¼»å­ã€‚)" },
            { word: "elevator", pos: "noun", def: "é›»æ¢¯", ex: "Let's take the elevator. (æˆ‘å€‘æ­é›»æ¢¯å§ã€‚)" },
            { word: "eleven", pos: "num.", def: "åä¸€", ex: "It is eleven o'clock. (ç¾åœ¨æ˜¯åä¸€é»ã€‚)" },
            { word: "else", pos: "adv.", def: "å…¶ä»–", ex: "Do you want anything else? (ä½ é‚„è¦å…¶ä»–çš„å—ï¼Ÿ)" },
            { word: "email", pos: "noun/verb", def: "é›»å­éƒµä»¶", ex: "Send me an email. (å¯„ä¸€å°é›»å­éƒµä»¶çµ¦æˆ‘ã€‚)" },
            { word: "embarrass", pos: "verb", def: "ä½¿å°·å°¬", ex: "Don't embarrass me. (åˆ¥è®“æˆ‘å°·å°¬ã€‚)" },
            { word: "emotion", pos: "noun", def: "æƒ…ç·’", ex: "She showed no emotion. (å¥¹æ²’æœ‰è¡¨ç¾å‡ºä»»ä½•æƒ…ç·’ã€‚)" },
            { word: "emphasize", pos: "verb", def: "å¼·èª¿", ex: "He emphasized the importance of safety. (ä»–å¼·èª¿äº†å®‰å…¨çš„é‡è¦æ€§ã€‚)" },
            { word: "employ", pos: "verb", def: "é›‡ç”¨", ex: "The company employs 100 people. (é€™å®¶å…¬å¸é›‡ç”¨äº†100äººã€‚)" },
            { word: "empty", pos: "adj.", def: "ç©ºçš„", ex: "The box is empty. (é€™å€‹ç®±å­æ˜¯ç©ºçš„ã€‚)" },
            { word: "encourage", pos: "verb", def: "é¼“å‹µ", ex: "My teacher encouraged me to try. (æˆ‘çš„è€å¸«é¼“å‹µæˆ‘å˜—è©¦ã€‚)" },
            { word: "end", pos: "noun/verb", def: "çµæŸ", ex: "This is the end of the movie. (é€™æ˜¯é›»å½±çš„çµå±€ã€‚)" },
            { word: "enemy", pos: "noun", def: "æ•µäºº", ex: "They faced the enemy bravely. (ä»–å€‘å‹‡æ•¢åœ°é¢å°æ•µäººã€‚)" },
            { word: "energy", pos: "noun", def: "èƒ½é‡ã€èƒ½æº", ex: "Solar energy is clean. (å¤ªé™½èƒ½æ˜¯ä¹¾æ·¨çš„ã€‚)" },
            { word: "engine", pos: "noun", def: "å¼•æ“", ex: "The car engine is loud. (æ±½è»Šå¼•æ“å¾ˆå¤§è²ã€‚)" },
            { word: "engineer", pos: "noun", def: "å·¥ç¨‹å¸«", ex: "He wants to be an engineer. (ä»–æƒ³æˆç‚ºä¸€åå·¥ç¨‹å¸«ã€‚)" },
            { word: "English", pos: "noun/adj.", def: "è‹±èªã€è‹±åœ‹çš„", ex: "I am learning English. (æˆ‘æ­£åœ¨å­¸è‹±æ–‡ã€‚)" },
            { word: "enjoy", pos: "verb", def: "äº«å—", ex: "Did you enjoy the party? (ä½ å–œæ­¡é€™å ´æ´¾å°å—ï¼Ÿ)" },
            { word: "enough", pos: "adj./adv.", def: "è¶³å¤ çš„", ex: "I have enough money. (æˆ‘æœ‰è¶³å¤ çš„éŒ¢ã€‚)" },
            { word: "enter", pos: "verb", def: "é€²å…¥", ex: "Please enter the room. (è«‹é€²å…¥æˆ¿é–“ã€‚)" },
            { word: "entrance", pos: "noun", def: "å…¥å£", ex: "The entrance is over there. (å…¥å£åœ¨é‚£é‚Šã€‚)" },
            { word: "envelope", pos: "noun", def: "ä¿¡å°", ex: "Put the letter in the envelope. (æŠŠä¿¡æ”¾é€²ä¿¡å°è£¡ã€‚)" },
            { word: "environment", pos: "noun", def: "ç’°å¢ƒ", ex: "We must protect the environment. (æˆ‘å€‘å¿…é ˆä¿è­·ç’°å¢ƒã€‚)" },
            { word: "envy", pos: "noun/verb", def: "ç¾¨æ…•ã€å«‰å¦’", ex: "I envy your talent. (æˆ‘ç¾¨æ…•ä½ çš„æ‰è¯ã€‚)" },
            { word: "equal", pos: "adj.", def: "å¹³ç­‰çš„", ex: "All men are created equal. (äººç”Ÿè€Œå¹³ç­‰ã€‚)" },
            { word: "equipment", pos: "noun", def: "è£å‚™", ex: "We need camping equipment. (æˆ‘å€‘éœ€è¦éœ²ç‡Ÿè£å‚™ã€‚)" },
            { word: "eraser", pos: "noun", def: "æ©¡çš®æ“¦", ex: "Can I borrow your eraser? (æˆ‘å¯ä»¥å€Ÿä½ çš„æ©¡çš®æ“¦å—ï¼Ÿ)" },
            { word: "error", pos: "noun", def: "éŒ¯èª¤", ex: "There is an error in the system. (ç³»çµ±è£¡æœ‰ä¸€å€‹éŒ¯èª¤ã€‚)" },
            { word: "escape", pos: "verb", def: "é€ƒè„«", ex: "The bird escaped from the cage. (é³¥å¾ç± å­è£¡é€ƒèµ°äº†ã€‚)" },
            { word: "especially", pos: "adv.", def: "ç‰¹åˆ¥åœ°", ex: "I like fruit, especially apples. (æˆ‘å–œæ­¡æ°´æœï¼Œç‰¹åˆ¥æ˜¯è˜‹æœã€‚)" },
            { word: "essay", pos: "noun", def: "æ–‡ç« ã€è«–æ–‡", ex: "Write an essay about your holiday. (å¯«ä¸€ç¯‡é—œæ–¼ä½ å‡æœŸçš„æ–‡ç« ã€‚)" },
            { word: "establish", pos: "verb", def: "å»ºç«‹", ex: "The school was established in 1990. (é€™æ‰€å­¸æ ¡å»ºç«‹æ–¼1990å¹´ã€‚)" },
            { word: "even", pos: "adv./adj.", def: "ç”šè‡³ã€å¹³å¦çš„", ex: "Even a child knows that. (ç”šè‡³é€£å°å­©éƒ½çŸ¥é“é‚£å€‹ã€‚)" },
            { word: "evening", pos: "noun", def: "å‚æ™šã€æ™šä¸Š", ex: "Good evening! (æ™šå®‰ï¼)" },
            { word: "event", pos: "noun", def: "äº‹ä»¶", ex: "The concert is a big event. (é€™å ´æ¼”å”±æœƒæ˜¯å€‹å¤§äº‹ä»¶ã€‚)" },
            { word: "ever", pos: "adv.", def: "æ›¾ç¶“", ex: "Have you ever been to Japan? (ä½ æ›¾ç¶“å»éæ—¥æœ¬å—ï¼Ÿ)" },
            { word: "every", pos: "adj.", def: "æ¯ä¸€å€‹", ex: "I exercise every day. (æˆ‘æ¯å¤©é‹å‹•ã€‚)" },
            { word: "everybody", pos: "pron.", def: "æ¯å€‹äºº", ex: "Everybody is happy. (æ¯å€‹äººéƒ½å¾ˆé–‹å¿ƒã€‚)" },
            { word: "everyone", pos: "pron.", def: "æ¯å€‹äºº", ex: "Everyone needs love. (æ¯å€‹äººéƒ½éœ€è¦æ„›ã€‚)" },
            { word: "everything", pos: "pron.", def: "æ¯ä»¶äº‹ç‰©", ex: "Everything is ready. (ä¸€åˆ‡éƒ½æº–å‚™å¥½äº†ã€‚)" },
            { word: "everywhere", pos: "adv.", def: "åˆ°è™•", ex: "I looked everywhere for my keys. (æˆ‘åˆ°è™•æ‰¾æˆ‘çš„é‘°åŒ™ã€‚)" },
            { word: "evidence", pos: "noun", def: "è­‰æ“š", ex: "There is no evidence. (æ²’æœ‰è­‰æ“šã€‚)" },
            { word: "evil", pos: "adj./noun", def: "é‚ªæƒ¡çš„", ex: "The witch was evil. (é‚£å€‹å¥³å·«å¾ˆé‚ªæƒ¡ã€‚)" },
            { word: "exact", pos: "adj.", def: "ç¢ºåˆ‡çš„", ex: "Tell me the exact time. (å‘Šè¨´æˆ‘ç¢ºåˆ‡çš„æ™‚é–“ã€‚)" },
            { word: "exactly", pos: "adv.", def: "ç²¾ç¢ºåœ°ã€æ­£æ˜¯", ex: "That is exactly what I mean. (é‚£æ­£æ˜¯æˆ‘çš„æ„æ€ã€‚)" },
            { word: "exam", pos: "noun", def: "è€ƒè©¦", ex: "I have a math exam tomorrow. (æˆ‘æ˜å¤©æœ‰æ•¸å­¸è€ƒè©¦ã€‚)" },
            { word: "example", pos: "noun", def: "ä¾‹å­", ex: "Give me an example. (çµ¦æˆ‘ä¸€å€‹ä¾‹å­ã€‚)" },
            { word: "excellent", pos: "adj.", def: "å„ªç§€çš„", ex: "Good job! Excellent work. (åšå¾—å¥½ï¼å„ªç§€çš„ä½œå“ã€‚)" },
            { word: "except", pos: "prep.", def: "é™¤äº†...ä¹‹å¤–", ex: "Everyone went except me. (é™¤äº†æˆ‘ä¹‹å¤–å¤§å®¶éƒ½å»äº†ã€‚)" },
            { word: "exchange", pos: "verb/noun", def: "äº¤æ›", ex: "We exchanged gifts. (æˆ‘å€‘äº¤æ›äº†ç¦®ç‰©ã€‚)" },
            { word: "excite", pos: "verb", def: "ä½¿èˆˆå¥®", ex: "The news excited us. (é€™å€‹æ¶ˆæ¯è®“æˆ‘å€‘å¾ˆèˆˆå¥®ã€‚)" },
            { word: "excited", pos: "adj.", def: "æ„Ÿåˆ°èˆˆå¥®çš„", ex: "I am excited about the trip. (æˆ‘å°é€™æ¬¡æ—…è¡Œæ„Ÿåˆ°å¾ˆèˆˆå¥®ã€‚)" },
            { word: "exciting", pos: "adj.", def: "ä»¤äººèˆˆå¥®çš„", ex: "The game was exciting. (é€™å ´æ¯”è³½å¾ˆåˆºæ¿€ã€‚)" },
            { word: "excuse", pos: "verb/noun", def: "åŸè«’ã€è—‰å£", ex: "Excuse me. (ä¸å¥½æ„æ€/å€Ÿéã€‚)" },
            { word: "exercise", pos: "noun/verb", def: "é‹å‹•ã€ç·´ç¿’", ex: "Exercise is good for health. (é‹å‹•å°å¥åº·æœ‰ç›Šã€‚)" },
            { word: "exhibition", pos: "noun", def: "å±•è¦½", ex: "We visited an art exhibition. (æˆ‘å€‘åƒè§€äº†ä¸€å€‹è—è¡“å±•è¦½ã€‚)" },
            { word: "exist", pos: "verb", def: "å­˜åœ¨", ex: "Do ghosts exist? (é¬¼å­˜åœ¨å—ï¼Ÿ)" },
            { word: "exit", pos: "noun", def: "å‡ºå£", ex: "Where is the exit? (å‡ºå£åœ¨å“ªè£¡ï¼Ÿ)" },
            { word: "expect", pos: "verb", def: "é æœŸã€æœŸå¾…", ex: "I expect him to be late. (æˆ‘é æœŸä»–æœƒé²åˆ°ã€‚)" },
            { word: "expensive", pos: "adj.", def: "æ˜‚è²´çš„", ex: "This car is too expensive. (é€™è¼›è»Šå¤ªè²´äº†ã€‚)" },
            { word: "experience", pos: "noun/verb", def: "ç¶“é©—", ex: "He has a lot of experience. (ä»–æœ‰å¾ˆå¤šç¶“é©—ã€‚)" },
            { word: "experiment", pos: "noun", def: "å¯¦é©—", ex: "The scientist did an experiment. (ç§‘å­¸å®¶åšäº†ä¸€å€‹å¯¦é©—ã€‚)" },
            { word: "expert", pos: "noun", def: "å°ˆå®¶", ex: "She is an expert on birds. (å¥¹æ˜¯é³¥é¡å°ˆå®¶ã€‚)" },
            { word: "explain", pos: "verb", def: "è§£é‡‹", ex: "Can you explain the rule? (ä½ èƒ½è§£é‡‹é€™å€‹è¦å‰‡å—ï¼Ÿ)" },
            { word: "express", pos: "verb", def: "è¡¨é”", ex: "Express your feelings. (è¡¨é”ä½ çš„æ„Ÿå—ã€‚)" },
            { word: "extra", pos: "adj.", def: "é¡å¤–çš„", ex: "I have an extra ticket. (æˆ‘æœ‰ä¸€å¼µå¤šé¤˜çš„ç¥¨ã€‚)" },
            { word: "eye", pos: "noun", def: "çœ¼ç›", ex: "Close your eyes. (é–‰ä¸Šä½ çš„çœ¼ç›ã€‚)" },
            { word: "eyebrow", pos: "noun", def: "çœ‰æ¯›", ex: "He raised his eyebrows. (ä»–æŒ‘èµ·äº†çœ‰æ¯›ã€‚)" }
        ];

        let currentIndex = 0;
        let activeList = []; 
        
        let cardElement, wordEl, posEl, defEl, sentenceEl;

        document.addEventListener('DOMContentLoaded', () => {
            cardElement = document.getElementById('card');
            wordEl = document.getElementById('word');
            posEl = document.getElementById('pos');
            defEl = document.getElementById('def');
            sentenceEl = document.getElementById('sentence');
            
            loadProgress();
        });


        function loadProgress() {
            // ä½¿ç”¨ masteredWords_E ä½œç‚ºç¨ç«‹çš„å„²å­˜éµå€¼
            const mastered = JSON.parse(localStorage.getItem('masteredWords_E')) || []; 
            activeList = vocabData.filter(item => !mastered.includes(item.word));
            
            if (activeList.length === 0) {
                showEmptyState();
            } else {
                document.getElementById('card-container').style.display = 'block';
                document.getElementById('controls').style.display = 'flex';
                document.getElementById('empty-state').style.display = 'none';
                document.querySelector('.progress').style.display = 'block';
                renderCard();
            }
            updateCount();
        }

        
        function renderCard() {
            if (activeList.length === 0) return;
            
            if (currentIndex >= activeList.length) currentIndex = 0;
            if (currentIndex < 0) currentIndex = activeList.length - 1;

            const item = activeList[currentIndex];
            wordEl.textContent = item.word;
            posEl.textContent = item.pos;
            defEl.textContent = item.def;
            sentenceEl.innerHTML = item.ex.replace(/\n/g, "<br>");
            
            cardElement.classList.remove('is-flipped');
        }

        function flipCard() {
            speechSynthesis.cancel();
            if (cardElement) {
               cardElement.classList.toggle('is-flipped');
            }
        }

        function playAudio(event) {
            event.stopPropagation();

            if (activeList.length === 0) return;

            const word = activeList[currentIndex].word;
            
            speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(word);
            utterance.lang = 'en-US'; 
            utterance.rate = 0.8; 

            speechSynthesis.speak(utterance);
        }

        function nextCard() {
            currentIndex++;
            renderCard();
            updateCount();
        }

        function prevCard() {
            currentIndex--;
            renderCard();
            updateCount();
        }

        function markMastered() {
            if (activeList.length === 0) return;
            
            const currentWord = activeList[currentIndex].word;
            
            let mastered = JSON.parse(localStorage.getItem('masteredWords_E')) || [];
            if (!mastered.includes(currentWord)) {
                mastered.push(currentWord);
                localStorage.setItem('masteredWords_E', JSON.stringify(mastered));
            }

            activeList.splice(currentIndex, 1);
            
            if (activeList.length === 0) {
                showEmptyState();
            } else {
                renderCard();
            }
            updateCount();
        }

        function markLearning() {
            nextCard();
        }

        function showEmptyState() {
            document.getElementById('card-container').style.display = 'none';
            document.getElementById('controls').style.display = 'none';
            document.getElementById('empty-state').style.display = 'block';
            document.querySelector('.progress').style.display = 'none';
        }

        function resetProgress() {
            localStorage.removeItem('masteredWords_E');
            location.reload(); 
        }

        function confirmReset() {
            if (confirm("ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰ç´€éŒ„ï¼Œé‡æ–°ç·´ç¿’æ‰€æœ‰å–®å­—å—ï¼Ÿ")) {
                resetProgress();
            }
        }

        function updateCount() {
            document.getElementById('current-index').textContent = activeList.length > 0 ? currentIndex + 1 : 0;
            document.getElementById('total-count').textContent = activeList.length; 
        }
        
    </script>
</body>
</html>