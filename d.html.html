<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šå·´èƒºè‹±èªå–®å­—å¡ - å­—æ¯D</title>
    <style>
        :root {
            /* å¤šå·´èƒºè‰²ç¥¨ Dopamine Palette */
            --bg-color: #FFFBEB; /* æŸ”å’Œé»ƒåº• */
            --card-front: #FFDE59; /* äº®é»ƒ */
            --card-back: #7ED957; /* é®®ç¶  */
            --text-primary: #333;
            --btn-master: #FF5757; /* çŠç‘šç´… */
            --btn-learn: #5CE1E6; /* äº®é’ */
            --btn-arrow: #CB6CE6; /* ç´«è‰² */
            --btn-reset: #FF9F1C; /* é®®æ©˜è‰² */
        }

        body {
            font-family: "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            position: relative;
        }

        /* å³ä¸Šè§’é‡ç½®æŒ‰éˆ• */
        .reset-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: var(--btn-reset);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
            transition: transform 0.1s;
            z-index: 100;
        }

        .reset-btn:active {
            transform: translateY(2px);
            box-shadow: none;
        }

        /* å¡ç‰‡å®¹å™¨èˆ‡ç¿»è½‰æ•ˆæœ */
        .card-container {
            width: 90%;
            max-width: 400px;
            height: 500px;
            perspective: 1000px;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
            border-radius: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 30px;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
            border: 5px solid #fff;
        }

        /* æ­£é¢è¨­è¨ˆ */
        .card-front {
            background-color: var(--card-front);
            color: var(--text-primary);
        }

        /* å–‡å­åœ–ç¤ºæ¨£å¼ */
        .speaker-icon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 3rem; /* åœ–ç¤ºå¤§å° */
            cursor: pointer;
            background: rgba(255,255,255,0.4);
            width: 60px;
            height: 60px;
            line-height: 60px;
            border-radius: 50%;
            transition: transform 0.2s, background 0.2s;
            z-index: 50; /* ç¢ºä¿å®ƒåœ¨æœ€ä¸Šå±¤ */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .speaker-icon:hover {
            transform: scale(1.1);
            background: rgba(255,255,255,0.8);
        }

        .speaker-icon:active {
            transform: scale(0.95);
        }

        .english-word {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            color: #FF6B6B;
            text-shadow: 2px 2px 0px #FFF;
        }

        .pos-tag {
            background: #FFF;
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #555;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
        }

        /* èƒŒé¢è¨­è¨ˆ */
        .card-back {
            background-color: var(--card-back);
            color: var(--text-primary);
            transform: rotateY(180deg);
        }

        .chinese-def {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #FFF;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
        }

        .example-sentence {
            font-size: 1.4rem;
            line-height: 1.6;
            background: rgba(255,255,255,0.3);
            padding: 15px;
            border-radius: 15px;
            white-space: pre-wrap; /* è®“ä¾‹å¥ä¸­çš„æ›è¡Œç¬¦è™Ÿç”Ÿæ•ˆ */
        }

        /* æ§åˆ¶å€ */
        .controls {
            display: flex;
            gap: 20px;
            align-items: center;
            width: 90%;
            max-width: 400px;
            justify-content: space-between;
        }

        .arrow-btn {
            background: var(--btn-arrow);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }

        .action-btn {
            border: none;
            padding: 15px 25px;
            border-radius: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
            flex: 1;
        }

        .btn-master { background-color: var(--btn-master); }
        .btn-learn { background-color: var(--btn-learn); color: #333; }
        
        button:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .progress {
            margin-top: 20px;
            font-size: 1rem;
            color: #888;
        }
        
        .empty-state {
            display: none;
            text-align: center;
            font-size: 1.5rem;
            color: #333;
        }

    </style>
</head>
<body>

    <button class="reset-btn" onclick="confirmReset()">ğŸ”„ å…¨éƒ¨é‡ä¾†</button>

    <div class="progress">é€²åº¦ï¼š<span id="current-index">0</span> / <span id="total-count">101</span></div>

    <div class="card-container" id="card-container" onclick="flipCard()">
        <div class="card" id="card">
            <div class="card-face card-front">
                <div class="speaker-icon" onclick="playAudio(event)">ğŸ”Š</div>
                
                <div class="english-word" id="word"></div>
                <div class="pos-tag" id="pos"></div>
                <div style="margin-top:20px; font-size: 0.9rem; opacity: 0.7;">(é»æ“Šå¡ç‰‡ç¿»é¢)</div>
            </div>
            <div class="card-face card-back">
                <div class="chinese-def" id="def"></div>
                <div class="example-sentence" id="sentence"></div>
            </div>
        </div>
    </div>
    
    <div class="empty-state" id="empty-state">
        <h2>ğŸ‰ å¤ªæ£’äº†ï¼</h2>
        <p>æ‰€æœ‰å–®å­—éƒ½å·²ç²¾ç†Ÿï¼</p>
        <button class="action-btn btn-learn" onclick="resetProgress()">é‡æ–°é–‹å§‹</button>
    </div>

    <div class="controls" id="controls">
        <button class="arrow-btn" onclick="prevCard()">&#8592;</button>
        <button class="action-btn btn-master" onclick="markMastered()">ğŸ’– å·²ç²¾ç†Ÿ</button>
        <button class="action-btn btn-learn" onclick="markLearning()">ğŸ’ª å­¸ç¿’ä¸­</button>
        <button class="arrow-btn" onclick="nextCard()">&#8594;</button>
    </div>

    <script>
        // è³‡æ–™ä¾†æºï¼šå­—æ¯D å–®å­—åˆ—è¡¨ (å…± 101 å€‹å–®å­—) - å·²ç§»é™¤ä¾‹å¥ä¸­çš„ ** ç¬¦è™Ÿ
        const vocabData = [
            { word: "dad", pos: "noun", def: "çˆ¸çˆ¸", ex: "My dad works hard. (æˆ‘çˆ¸çˆ¸å·¥ä½œå¾ˆåŠªåŠ›ã€‚)" },
            { word: "daily", pos: "adj./adv.", def: "æ¯æ—¥çš„", ex: "I read the daily news. (æˆ‘è®€æ¯æ—¥æ–°èã€‚)" },
            { word: "damage", pos: "noun/verb", def: "æå®³", ex: "The fire caused great damage. (ç«ç½é€ æˆäº†å·¨å¤§çš„æå®³ã€‚)" },
            { word: "dance", pos: "verb/noun", def: "è·³èˆ", ex: "She loves to dance. (å¥¹å–œæ­¡è·³èˆã€‚)" },
            { word: "danger", pos: "noun", def: "å±éšª", ex: "Don't go near the water, it is danger. (ä¸è¦é è¿‘æ°´é‚Šï¼Œé‚£å¾ˆå±éšªã€‚)" },
            { word: "dark", pos: "adj./noun", def: "é»‘æš—çš„", ex: "It gets dark early in winter. (å†¬å¤©å¾ˆæ—©å°±å¤©é»‘äº†ã€‚)" },
            { word: "data", pos: "noun", def: "è³‡æ–™", ex: "We need more data to analyze. (æˆ‘å€‘éœ€è¦æ›´å¤šè³‡æ–™ä¾†åˆ†æã€‚)" },
            { word: "date", pos: "noun", def: "æ—¥æœŸ", ex: "What is today's date? (ä»Šå¤©æ˜¯ä»€éº¼æ—¥æœŸï¼Ÿ)" },
            { word: "daughter", pos: "noun", def: "å¥³å…’", ex: "My daughter is ten years old. (æˆ‘çš„å¥³å…’åæ­²äº†ã€‚)" },
            { word: "day", pos: "noun", def: "ç™½å¤©", ex: "Have a nice day. (ç¥ä½ æœ‰ç¾å¥½çš„ä¸€å¤©ã€‚)" },
            { word: "dead", pos: "adj.", def: "æ­»çš„", ex: "The plant is dead. (é€™æ ªæ¤ç‰©æ­»äº†ã€‚)" },
            { word: "deal", pos: "verb/noun", def: "è™•ç†", ex: "We need to deal with this problem. (æˆ‘å€‘éœ€è¦è™•ç†é€™å€‹å•é¡Œã€‚)" },
            { word: "dear", pos: "adj.", def: "è¦ªæ„›çš„", ex: "Dear Mom and Dad. (è¦ªæ„›çš„çˆ¸çˆ¸åª½åª½ã€‚)" },
            { word: "death", pos: "noun", def: "æ­»äº¡", ex: "His death was a tragedy. (ä»–çš„æ­»äº¡æ˜¯ä¸€å€‹æ‚²åŠ‡ã€‚)" },
            { word: "debate", pos: "noun/verb", def: "çˆ­è«–", ex: "They had a heated debate. (ä»–å€‘é€²è¡Œäº†ä¸€å ´æ¿€çƒˆçš„è¾¯è«–ã€‚)" },
            { word: "debt", pos: "noun", def: "å‚µå‹™", ex: "He is in debt. (ä»–è² å‚µäº†ã€‚)" },
            { word: "decade", pos: "noun", def: "åå¹´", ex: "A decade is ten years. (åå¹´æ˜¯ä¸€å€‹åå¹´ã€‚)" },
            { word: "December", pos: "noun", def: "åäºŒæœˆ", ex: "December is the last month of the year. (åäºŒæœˆæ˜¯ä¸€å¹´ä¸­çš„æœ€å¾Œä¸€å€‹æœˆã€‚)" },
            { word: "decide", pos: "verb", def: "æ±ºå®š", ex: "I cannot decide what to eat. (æˆ‘ç„¡æ³•æ±ºå®šè¦åƒä»€éº¼ã€‚)" },
            { word: "decision", pos: "noun", def: "æ±ºå®š", ex: "That was a difficult decision. (é‚£æ˜¯ä¸€å€‹å›°é›£çš„æ±ºå®šã€‚)" },
            { word: "decorate", pos: "verb", def: "è£é£¾", ex: "Let's decorate the room for Christmas. (æˆ‘å€‘ä¾†è£é£¾æˆ¿é–“éè–èª•ç¯€å§ã€‚)" },
            { word: "deep", pos: "adj.", def: "æ·±çš„", ex: "The water is very deep. (æ°´å¾ˆæ·±ã€‚)" },
            { word: "defeat", pos: "verb/noun", def: "æ“Šæ•—", ex: "They defeated the enemy. (ä»–å€‘æ“Šæ•—äº†æ•µäººã€‚)" },
            { word: "defend", pos: "verb", def: "é˜²ç¦¦", ex: "We must defend our country. (æˆ‘å€‘å¿…é ˆä¿è¡›æˆ‘å€‘çš„åœ‹å®¶ã€‚)" },
            { word: "defense", pos: "noun", def: "é˜²ç¦¦", ex: "The team has a strong defense. (é€™æ”¯éšŠä¼æœ‰å¾ˆå¼·çš„é˜²ç¦¦ã€‚)" },
            { word: "define", pos: "verb", def: "å®šç¾©", ex: "Can you define this word? (ä½ èƒ½å®šç¾©é€™å€‹è©å—ï¼Ÿ)" },
            { word: "degree", pos: "noun", def: "ç¨‹åº¦", ex: "The temperature is 25 degrees. (æ°£æº«æ˜¯ 25 åº¦ã€‚)" },
            { word: "delay", pos: "noun/verb", def: "å»¶é²", ex: "The flight was delayed. (èˆªç­è¢«å»¶é²äº†ã€‚)" },
            { word: "delicious", pos: "adj.", def: "ç¾å‘³çš„", ex: "This cake is delicious. (é€™å€‹è›‹ç³•å¾ˆç¾å‘³ã€‚)" },
            { word: "deliver", pos: "verb", def: "éé€", ex: "The postman will deliver the mail. (éƒµå·®æœƒéé€éƒµä»¶ã€‚)" },
            { word: "demand", pos: "noun/verb", def: "è¦æ±‚", ex: "He demanded an apology. (ä»–è¦æ±‚é“æ­‰ã€‚)" },
            { word: "deny", pos: "verb", def: "å¦èª", ex: "He denied stealing the money. (ä»–å¦èªå·äº†éŒ¢ã€‚)" },
            { word: "department", pos: "noun", def: "éƒ¨é–€", ex: "Which department do you work in? (ä½ åœ¨å“ªå€‹éƒ¨é–€å·¥ä½œï¼Ÿ)" },
            { word: "depend", pos: "verb", def: "ä¾è³´", ex: "You can depend on me. (ä½ å¯ä»¥ä¾è³´æˆ‘ã€‚)" },
            { word: "deposit", pos: "noun/verb", def: "å­˜æ¬¾", ex: "I made a deposit at the bank. (æˆ‘åœ¨éŠ€è¡Œå­˜äº†ä¸€ç­†éŒ¢ã€‚)" },
            { word: "describe", pos: "verb", def: "æè¿°", ex: "Can you describe the thief? (ä½ èƒ½æè¿°ä¸€ä¸‹é‚£å€‹å°å·å—ï¼Ÿ)" },
            { word: "desert", pos: "noun", def: "æ²™æ¼ ", ex: "The Sahara desert is huge. (æ’’å“ˆæ‹‰æ²™æ¼ éå¸¸å·¨å¤§ã€‚)" },
            { word: "design", pos: "noun/verb", def: "è¨­è¨ˆ", ex: "She designs clothes. (å¥¹è¨­è¨ˆè¡£æœã€‚)" },
            { word: "desire", pos: "noun/verb", def: "æ¸´æœ›", ex: "He has a strong desire to win. (ä»–æœ‰å¼·çƒˆçš„ç²å‹æ¸´æœ›ã€‚)" },
            { word: "desk", pos: "noun", def: "æ›¸æ¡Œ", ex: "Put the book on the desk. (æŠŠæ›¸æ”¾åœ¨æ›¸æ¡Œä¸Šã€‚)" },
            { word: "destroy", pos: "verb", def: "ç ´å£", ex: "The storm destroyed the house. (æš´é¢¨é›¨æ‘§æ¯€äº†æˆ¿å­ã€‚)" },
            { word: "detail", pos: "noun", def: "ç´°ç¯€", ex: "Please check the details. (è«‹æª¢æŸ¥ç´°ç¯€ã€‚)" },
            { word: "develop", pos: "verb", def: "ç™¼å±•", ex: "We need to develop new products. (æˆ‘å€‘éœ€è¦é–‹ç™¼æ–°ç”¢å“ã€‚)" },
            { word: "device", pos: "noun", def: "è£ç½®", ex: "My phone is a smart device. (æˆ‘çš„æ‰‹æ©Ÿæ˜¯å€‹æ™ºæ…§è£ç½®ã€‚)" },
            { word: "dialogue", pos: "noun", def: "å°è©±", ex: "The play has good dialogue. (é€™é½£æˆ²çš„å°ç™½å¾ˆæ£’ã€‚)" },
            { word: "diamond", pos: "noun", def: "é‘½çŸ³", ex: "She wore a diamond ring. (å¥¹æˆ´è‘—ä¸€æšé‘½æˆ’ã€‚)" },
            { word: "dictionary", pos: "noun", def: "å­—å…¸", ex: "Look up the word in the dictionary. (åœ¨å­—å…¸è£¡æŸ¥é€™å€‹å­—ã€‚)" },
            { word: "die", pos: "verb", def: "æ­»äº¡", ex: "The patient may die. (é€™ä½ç—…äººå¯èƒ½æœƒæ­»ã€‚)" },
            { word: "diet", pos: "noun", def: "é£²é£Ÿ", ex: "I am on a strict diet. (æˆ‘æ­£åœ¨åš´æ ¼æ§åˆ¶é£²é£Ÿã€‚)" },
            { word: "difference", pos: "noun", def: "å·®ç•°", ex: "What is the difference? (æœ‰ä»€éº¼ä¸åŒï¼Ÿ)" },
            { word: "different", pos: "adj.", def: "ä¸åŒçš„", ex: "We have different opinions. (æˆ‘å€‘æœ‰ä¸åŒçš„æ„è¦‹ã€‚)" },
            { word: "difficult", pos: "adj.", def: "å›°é›£çš„", ex: "The test was very difficult. (é€™å ´è€ƒè©¦éå¸¸å›°é›£ã€‚)" },
            { word: "difficulty", pos: "noun", def: "å›°é›£", ex: "They faced many difficulties. (ä»–å€‘é¢è‡¨äº†è¨±å¤šå›°é›£ã€‚)" },
            { word: "dig", pos: "verb", def: "æŒ–æ˜", ex: "They are digging a hole. (ä»–å€‘æ­£åœ¨æŒ–ä¸€å€‹æ´ã€‚)" },
            { word: "dimension", pos: "noun", def: "å°ºå¯¸", ex: "What are the dimensions of the box? (é€™å€‹ç›’å­çš„å°ºå¯¸æ˜¯å¤šå°‘ï¼Ÿ)" },
            { word: "dinner", pos: "noun", def: "æ™šé¤", ex: "What's for dinner tonight? (ä»Šæ™šæ™šé¤åƒä»€éº¼ï¼Ÿ)" },
            { word: "diploma", pos: "noun", def: "ç•¢æ¥­è­‰æ›¸", ex: "He got his diploma last year. (ä»–å»å¹´æ‹¿åˆ°äº†ç•¢æ¥­è­‰æ›¸ã€‚)" },
            { word: "direct", pos: "adj.", def: "ç›´æ¥çš„", ex: "Go straight in that direction. (ç›´æ¥æœé‚£å€‹æ–¹å‘èµ°ã€‚)" },
            { word: "direction", pos: "noun", def: "æ–¹å‘", ex: "Which direction should we go? (æˆ‘å€‘è©²å¾€å“ªå€‹æ–¹å‘èµ°ï¼Ÿ)" },
            { word: "dirty", pos: "adj.", def: "é«’çš„", ex: "My shoes are dirty. (æˆ‘çš„é‹å­å¾ˆé«’ã€‚)" },
            { word: "disappear", pos: "verb", def: "æ¶ˆå¤±", ex: "The rabbit suddenly disappeared. (å…”å­çªç„¶æ¶ˆå¤±äº†ã€‚)" },
            { word: "discover", pos: "verb", def: "ç™¼ç¾", ex: "I discovered a new cafe. (æˆ‘ç™¼ç¾äº†ä¸€å®¶æ–°çš„å’–å•¡é¤¨ã€‚)" },
            { word: "discount", pos: "noun/verb", def: "æŠ˜æ‰£", ex: "They offered a big discount. (ä»–å€‘æä¾›äº†å¾ˆå¤§çš„æŠ˜æ‰£ã€‚)" },
            { word: "discuss", pos: "verb", def: "è¨è«–", ex: "We need to discuss the plan. (æˆ‘å€‘éœ€è¦è¨è«–é€™å€‹è¨ˆç•«ã€‚)" },
            { word: "disease", pos: "noun", def: "ç–¾ç—…", ex: "This is a serious disease. (é€™æ˜¯ä¸€ç¨®åš´é‡çš„ç–¾ç—…ã€‚)" },
            { word: "dish", pos: "noun", def: "ç›¤å­ã€èœé¤š", ex: "This is my favorite dish. (é€™æ˜¯æˆ‘æœ€å–œæ­¡çš„èœé¤šã€‚)" },
            { word: "display", pos: "verb/noun", def: "å±•ç¤º", ex: "The paintings are on display. (é€™äº›ç•«ä½œæ­£åœ¨å±•ç¤ºã€‚)" },
            { word: "distance", pos: "noun", def: "è·é›¢", ex: "What is the distance to the station? (åˆ°è»Šç«™çš„è·é›¢æ˜¯å¤šå°‘ï¼Ÿ)" },
            { word: "disturb", pos: "verb", def: "æ‰“æ“¾", ex: "Please do not disturb me. (è«‹ä¸è¦æ‰“æ“¾æˆ‘ã€‚)" },
            { word: "divide", pos: "verb", def: "åˆ†å‰²", ex: "Divide the cake into four pieces. (æŠŠè›‹ç³•åˆ†æˆå››å¡Šã€‚)" },
            { word: "divorce", pos: "noun/verb", def: "é›¢å©š", ex: "They decided to get a divorce. (ä»–å€‘æ±ºå®šé›¢å©šã€‚)" },
            { word: "do", pos: "verb", def: "åš", ex: "What are you going to do? (ä½ æ‰“ç®—åšä»€éº¼ï¼Ÿ)" },
            { word: "doctor", pos: "noun", def: "é†«ç”Ÿ", ex: "I went to see the doctor. (æˆ‘å»çœ‹é†«ç”Ÿäº†ã€‚)" },
            { word: "document", pos: "noun", def: "æ–‡ä»¶", ex: "Sign this document. (ç°½ç½²é€™ä»½æ–‡ä»¶ã€‚)" },
            { word: "dog", pos: "noun", def: "ç‹—", ex: "My dog is very playful. (æˆ‘çš„ç‹—éå¸¸æ„›ç©ã€‚)" },
            { word: "doll", pos: "noun", def: "æ´‹å¨ƒå¨ƒ", ex: "The girl loves her doll. (é‚£å€‹å¥³å­©å¾ˆå–œæ­¡å¥¹çš„æ´‹å¨ƒå¨ƒã€‚)" },
            { word: "door", pos: "noun", def: "é–€", ex: "Close the door, please. (è«‹é—œä¸Šé–€ã€‚)" },
            { word: "double", pos: "adj.", def: "å…©å€çš„", ex: "I want a double scoop of ice cream. (æˆ‘è¦å…©å€ä»½é‡çš„å†°æ·‡æ·‹ã€‚)" },
            { word: "doubt", pos: "noun/verb", def: "æ‡·ç–‘", ex: "I doubt his honesty. (æˆ‘æ‡·ç–‘ä»–çš„èª å¯¦ã€‚)" },
            { word: "down", pos: "adv./prep.", def: "å‘ä¸‹", ex: "Look down at the floor. (çœ‹è‘—åœ°æ¿ã€‚)" },
            { word: "downtown", pos: "noun/adv.", def: "å¸‚ä¸­å¿ƒ", ex: "Let's go downtown. (æˆ‘å€‘å»å¸‚ä¸­å¿ƒå§ã€‚)" },
            { word: "dozen", pos: "noun", def: "ä¸€æ‰“", ex: "I bought a dozen eggs. (æˆ‘è²·äº†ä¸€æ‰“é›è›‹ã€‚)" },
            { word: "draft", pos: "noun/verb", def: "è‰ç¨¿", ex: "This is the first draft of my essay. (é€™æ˜¯æˆ‘çš„æ–‡ç« åˆç¨¿ã€‚)" },
            { word: "drag", pos: "verb", def: "æ‹–æ‹‰", ex: "Drag the file to the desktop. (æŠŠæª”æ¡ˆæ‹–åˆ°æ¡Œé¢ä¸Šã€‚)" },
            { word: "draw", pos: "verb", def: "ç•«", ex: "Can you draw a cat? (ä½ æœƒç•«è²“å—ï¼Ÿ)" },
            { word: "dream", pos: "noun/verb", def: "å¤¢", ex: "I had a strange dream last night. (æˆ‘æ˜¨æ™šåšäº†ä¸€å€‹å¥‡æ€ªçš„å¤¢ã€‚)" },
            { word: "dress", pos: "noun/verb", def: "æ´‹è£", ex: "She wore a beautiful dress. (å¥¹ç©¿äº†ä¸€ä»¶æ¼‚äº®çš„æ´‹è£ã€‚)" },
            { word: "drink", pos: "noun/verb", def: "é£²æ–™", ex: "I need a cold drink. (æˆ‘éœ€è¦ä¸€æ¯å†·é£²ã€‚)" },
            { word: "drive", pos: "verb", def: "é§•é§›", ex: "I drive to work every day. (æˆ‘æ¯å¤©é–‹è»Šä¸Šç­ã€‚)" },
            { word: "driver", pos: "noun", def: "å¸æ©Ÿ", ex: "The bus driver was friendly. (å…¬è»Šå¸æ©Ÿå¾ˆå‹å–„ã€‚)" },
            { word: "drop", pos: "verb", def: "æ‰è½", ex: "Don't drop your phone. (ä¸è¦è®“ä½ çš„æ‰‹æ©Ÿæ‰ä¸‹å»ã€‚)" },
            { word: "drug", pos: "noun", def: "è—¥ç‰©", ex: "Take this drug twice a day. (é€™ç¨®è—¥ç‰©ä¸€å¤©åƒå…©æ¬¡ã€‚)" },
            { word: "drum", pos: "noun", def: "é¼“", ex: "He plays the drums in a band. (ä»–åœ¨æ¨‚åœ˜è£¡æ‰“é¼“ã€‚)" },
            { word: "dry", pos: "adj./verb", def: "ä¹¾çš„", ex: "Is the laundry dry yet? (è¡£æœæ›¬ä¹¾äº†å—ï¼Ÿ)" },
            { word: "duck", pos: "noun", def: "é´¨å­", ex: "We saw a duck in the pond. (æˆ‘å€‘åœ¨æ± å¡˜è£¡çœ‹åˆ°ä¸€éš»é´¨å­ã€‚)" },
            { word: "due", pos: "adj.", def: "åˆ°æœŸçš„", ex: "The rent is due next week. (ç§Ÿé‡‘ä¸‹é€±åˆ°æœŸã€‚)" },
            { word: "dull", pos: "adj.", def: "æ¯ç‡¥çš„", ex: "The lecture was very dull. (é‚£å ´è¬›åº§éå¸¸æ¯ç‡¥ã€‚)" },
            { word: "dump", pos: "verb", def: "å‚¾å€’", ex: "Don't dump trash here. (ä¸è¦åœ¨é€™è£¡å‚¾å€’åƒåœ¾ã€‚)" },
            { word: "during", pos: "prep.", def: "åœ¨...æœŸé–“", ex: "I worked hard during the summer. (æˆ‘åœ¨å¤å¤©æœŸé–“å·¥ä½œå¾ˆåŠªåŠ›ã€‚)" },
            { word: "dust", pos: "noun/verb", def: "ç°å¡µ", ex: "There is too much dust on the shelf. (æ¶å­ä¸Šæœ‰å¤ªå¤šç°å¡µã€‚)" },
            { word: "duty", pos: "noun", def: "è²¬ä»»", ex: "It is your duty to protect your family. (ä¿è­·ä½ çš„å®¶äººæ˜¯ä½ çš„è²¬ä»»ã€‚)" }
        ];

        let currentIndex = 0;
        let activeList = []; 
        
        let cardElement, wordEl, posEl, defEl, sentenceEl;

        document.addEventListener('DOMContentLoaded', () => {
            cardElement = document.getElementById('card');
            wordEl = document.getElementById('word');
            posEl = document.getElementById('pos');
            defEl = document.getElementById('def');
            sentenceEl = document.getElementById('sentence');
            
            loadProgress();
        });


        function loadProgress() {
            // æ³¨æ„ï¼šé€™è£¡å°‡ key è¨­ç‚º masteredWords_Dï¼Œç¢ºä¿ D å­—æ¯é€²åº¦ç¨ç«‹
            const mastered = JSON.parse(localStorage.getItem('masteredWords_D')) || []; 
            // éæ¿¾æ‰å·²ç¶“ç²¾ç†Ÿçš„å–®å­—ï¼Œåªç•™ä¸‹éœ€è¦å­¸ç¿’çš„
            activeList = vocabData.filter(item => !mastered.includes(item.word));
            
            if (activeList.length === 0) {
                showEmptyState();
            } else {
                // æ¢å¾©æ­£å¸¸é¡¯ç¤º
                document.getElementById('card-container').style.display = 'block';
                document.getElementById('controls').style.display = 'flex';
                document.getElementById('empty-state').style.display = 'none';
                document.querySelector('.progress').style.display = 'block';
                renderCard();
            }
            updateCount();
        }

        
        function renderCard() {
            if (activeList.length === 0) return;
            
            // ç¢ºä¿ index ä¸æœƒè¶…å‡ºç¯„åœ
            if (currentIndex >= activeList.length) currentIndex = 0;
            if (currentIndex < 0) currentIndex = activeList.length - 1;

            const item = activeList[currentIndex];
            wordEl.textContent = item.word;
            posEl.textContent = item.pos;
            defEl.textContent = item.def;
            sentenceEl.innerHTML = item.ex.replace(/\n/g, "<br>"); // æ”¯æ´æ›è¡Œ
            
            // æ¯æ¬¡åˆ‡æ›å¡ç‰‡æ™‚ï¼Œç¢ºä¿å¡ç‰‡è½‰å›æ­£é¢
            cardElement.classList.remove('is-flipped');
        }

        function flipCard() {
            // ç¿»å¡å‰å…ˆåœæ­¢ç™¼éŸ³
            speechSynthesis.cancel();
            if (cardElement) {
               cardElement.classList.toggle('is-flipped');
            }
        }

        function playAudio(event) {
            // é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼šè®“ç€è¦½å™¨çŸ¥é“ã€Œåªæ’­æ”¾è²éŸ³ï¼Œä¸è¦è§¸ç™¼ç¿»é¢ã€
            event.stopPropagation();

            if (activeList.length === 0) return;

            const word = activeList[currentIndex].word;
            
            // åœæ­¢ä»»ä½•æ­£åœ¨æ’­æ”¾çš„èªéŸ³
            speechSynthesis.cancel();
            
            // ä½¿ç”¨ç€è¦½å™¨å…§å»ºçš„èªéŸ³åˆæˆ
            const utterance = new SpeechSynthesisUtterance(word);
            
            // è¨­å®šèªè¨€ç‚ºç¾å¼è‹±èª (en-US)
            utterance.lang = 'en-US'; 
            
            // èªé€Ÿ
            utterance.rate = 0.8; 

            // æ’­æ”¾
            speechSynthesis.speak(utterance);
        }

        function nextCard() {
            currentIndex++;
            renderCard();
            updateCount();
        }

        function prevCard() {
            currentIndex--;
            renderCard();
            updateCount();
        }

        function markMastered() {
            if (activeList.length === 0) return;
            
            const currentWord = activeList[currentIndex].word;
            
            // å­˜å…¥ LocalStorageï¼Œä½¿ç”¨ D çš„å°ˆå±¬ key
            let mastered = JSON.parse(localStorage.getItem('masteredWords_D')) || [];
            if (!mastered.includes(currentWord)) {
                mastered.push(currentWord);
                localStorage.setItem('masteredWords_D', JSON.stringify(mastered));
            }

            // å¾ç›®å‰çš„æ’­æ”¾æ¸…å–®ç§»é™¤
            activeList.splice(currentIndex, 1);
            
            // æª¢æŸ¥æ˜¯å¦é‚„æœ‰å–®å­—
            if (activeList.length === 0) {
                showEmptyState();
            } else {
                renderCard();
            }
            updateCount();
        }

        function markLearning() {
            nextCard();
        }

        function showEmptyState() {
            document.getElementById('card-container').style.display = 'none';
            document.getElementById('controls').style.display = 'none';
            document.getElementById('empty-state').style.display = 'block';
            document.querySelector('.progress').style.display = 'none';
        }

        function resetProgress() {
            localStorage.removeItem('masteredWords_D');
            location.reload(); // é‡æ–°è¼‰å…¥ç¶²é 
        }

        // å¸¶æœ‰ç¢ºèªè¦–çª—çš„é‡ç½®åŠŸèƒ½
        function confirmReset() {
            if (confirm("ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰ç´€éŒ„ï¼Œé‡æ–°ç·´ç¿’æ‰€æœ‰å–®å­—å—ï¼Ÿ")) {
                resetProgress();
            }
        }

        function updateCount() {
            document.getElementById('current-index').textContent = activeList.length > 0 ? currentIndex + 1 : 0;
            // é¡¯ç¤º activeList çš„é•·åº¦ (å¾…å­¸å–®å­—æ•¸)
            document.getElementById('total-count').textContent = activeList.length; 
        }
        
    </script>
</body>
</html>