<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šå·´èƒºè‹±èªå–®å­—å¡ - å­—æ¯B</title>
    <style>
        :root {
            /* å¤šå·´èƒºè‰²ç¥¨ Dopamine Palette */
            --bg-color: #FFFBEB; /* æŸ”å’Œé»ƒåº• */
            --card-front: #FFDE59; /* äº®é»ƒ */
            --card-back: #7ED957; /* é®®ç¶  */
            --text-primary: #333;
            --btn-master: #FF5757; /* çŠç‘šç´… */
            --btn-learn: #5CE1E6; /* äº®é’ */
            --btn-arrow: #CB6CE6; /* ç´«è‰² */
            --btn-reset: #FF9F1C; /* é®®æ©˜è‰² */
        }

        body {
            font-family: "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            position: relative;
        }

        /* å³ä¸Šè§’é‡ç½®æŒ‰éˆ• */
        .reset-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: var(--btn-reset);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
            transition: transform 0.1s;
            z-index: 100;
        }

        .reset-btn:active {
            transform: translateY(2px);
            box-shadow: none;
        }

        /* å¡ç‰‡å®¹å™¨èˆ‡ç¿»è½‰æ•ˆæœ */
        .card-container {
            width: 90%;
            max-width: 400px;
            height: 500px;
            perspective: 1000px;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
            border-radius: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 30px;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
            border: 5px solid #fff;
        }

        /* æ­£é¢è¨­è¨ˆ */
        .card-front {
            background-color: var(--card-front);
            color: var(--text-primary);
        }

        /* å–‡å­åœ–ç¤ºæ¨£å¼ */
        .speaker-icon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 3rem; /* åœ–ç¤ºå¤§å° */
            cursor: pointer;
            background: rgba(255,255,255,0.4);
            width: 60px;
            height: 60px;
            line-height: 60px;
            border-radius: 50%;
            transition: transform 0.2s, background 0.2s;
            z-index: 50; /* ç¢ºä¿å®ƒåœ¨æœ€ä¸Šå±¤ */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .speaker-icon:hover {
            transform: scale(1.1);
            background: rgba(255,255,255,0.8);
        }

        .speaker-icon:active {
            transform: scale(0.95);
        }

        .english-word {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            color: #FF6B6B;
            text-shadow: 2px 2px 0px #FFF;
        }

        .pos-tag {
            background: #FFF;
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #555;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
        }

        /* èƒŒé¢è¨­è¨ˆ */
        .card-back {
            background-color: var(--card-back);
            color: var(--text-primary);
            transform: rotateY(180deg);
        }

        .chinese-def {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #FFF;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
        }

        .example-sentence {
            font-size: 1.4rem;
            line-height: 1.6;
            background: rgba(255,255,255,0.3);
            padding: 15px;
            border-radius: 15px;
            white-space: pre-wrap; /* è®“ä¾‹å¥ä¸­çš„æ›è¡Œç¬¦è™Ÿç”Ÿæ•ˆ */
        }

        /* æ§åˆ¶å€ */
        .controls {
            display: flex;
            gap: 20px;
            align-items: center;
            width: 90%;
            max-width: 400px;
            justify-content: space-between;
        }

        .arrow-btn {
            background: var(--btn-arrow);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }

        .action-btn {
            border: none;
            padding: 15px 25px;
            border-radius: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
            flex: 1;
        }

        .btn-master { background-color: var(--btn-master); }
        .btn-learn { background-color: var(--btn-learn); color: #333; }
        
        button:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .progress {
            margin-top: 20px;
            font-size: 1rem;
            color: #888;
        }
        
        .empty-state {
            display: none;
            text-align: center;
            font-size: 1.5rem;
            color: #333;
        }

    </style>
</head>
<body>

    <button class="reset-btn" onclick="confirmReset()">ğŸ”„ å…¨éƒ¨é‡ä¾†</button>

    <div class="progress">é€²åº¦ï¼š<span id="current-index">0</span> / <span id="total-count">99</span></div>

    <div class="card-container" id="card-container" onclick="flipCard()">
        <div class="card" id="card">
            <div class="card-face card-front">
                <div class="speaker-icon" onclick="playAudio(event)">ğŸ”Š</div>
                
                <div class="english-word" id="word"></div>
                <div class="pos-tag" id="pos"></div>
                <div style="margin-top:20px; font-size: 0.9rem; opacity: 0.7;">(é»æ“Šå¡ç‰‡ç¿»é¢)</div>
            </div>
            <div class="card-face card-back">
                <div class="chinese-def" id="def"></div>
                <div class="example-sentence" id="sentence"></div>
            </div>
        </div>
    </div>
    
    <div class="empty-state" id="empty-state">
        <h2>ğŸ‰ å¤ªæ£’äº†ï¼</h2>
        <p>æ‰€æœ‰å–®å­—éƒ½å·²ç²¾ç†Ÿï¼</p>
        <button class="action-btn btn-learn" onclick="resetProgress()">é‡æ–°é–‹å§‹</button>
    </div>

    <div class="controls" id="controls">
        <button class="arrow-btn" onclick="prevCard()">&#8592;</button>
        <button class="action-btn btn-master" onclick="markMastered()">ğŸ’– å·²ç²¾ç†Ÿ</button>
        <button class="action-btn btn-learn" onclick="markLearning()">ğŸ’ª å­¸ç¿’ä¸­</button>
        <button class="arrow-btn" onclick="nextCard()">&#8594;</button>
    </div>

    <script>
        // è³‡æ–™ä¾†æºï¼šå¾æ‚¨çš„ã€Œå­—æ¯b.docxã€æª”æ¡ˆä¸­æ“·å– 99 å€‹å–®å­—
        const vocabData = [
            { word: "baby", pos: "noun", def: "å¬°å…’", ex: "The  baby  is crying. (å¬°å…’åœ¨å“­ã€‚)" },
            { word: "babysit", pos: "verb", def: "ç•¶è‡¨æ™‚ä¿æ¯", ex: "Can you  babysit  for us tonight? (ä½ ä»Šæ™šèƒ½å¹«æˆ‘å€‘å¸¶å°å­©å—ï¼Ÿ)" },
            { word: "back", pos: "noun/adv.", def: "èƒŒéƒ¨ã€å‘å¾Œ", ex: "My  back  hurts. (æˆ‘çš„èƒŒå¾ˆç—›ã€‚)" },
            { word: "backward", pos: "adv.", def: "å‘å¾Œåœ°", ex: "He looked  backward . (ä»–å‘å¾Œçœ‹ã€‚)" },
            { word: "bad", pos: "adj.", def: "å£çš„", ex: "That is a  bad  idea. (é‚£æ˜¯å€‹å£ä¸»æ„ã€‚)" },
            { word: "badly", pos: "adv.", def: "åš´é‡åœ°ã€å£åœ°", ex: "He was treated  badly . (ä»–å—åˆ°æƒ¡åŠ£çš„å°å¾…ã€‚)" },
            { word: "bag", pos: "noun", def: "è¢‹å­", ex: "I lost my  bag . (æˆ‘å¼„ä¸Ÿäº†æˆ‘çš„è¢‹å­ã€‚)" },
            { word: "bake", pos: "verb", def: "çƒ˜çƒ¤", ex: "I like to  bake  cookies. (æˆ‘å–œæ­¡çƒ¤é¤…ä¹¾ã€‚)" },
            { word: "bakery", pos: "noun", def: "éºµåŒ…åº—", ex: "The  bakery  smells good. (é€™å®¶éºµåŒ…åº—èèµ·ä¾†å¾ˆé¦™ã€‚)" },
            { word: "balcony", pos: "noun", def: "é™½å°", ex: "She is standing on the  balcony . (å¥¹ç«™åœ¨é™½å°ä¸Šã€‚)" },
            { word: "ball", pos: "noun", def: "çƒ", ex: "Throw the  ball  to me. (æŠŠçƒä¸Ÿçµ¦æˆ‘ã€‚)" },
            { word: "balloon", pos: "noun", def: "æ°£çƒ", ex: "The child held a red  balloon . (å°å­©æ‹¿è‘—ä¸€å€‹ç´…æ°£çƒã€‚)" },
            { word: "banana", pos: "noun", def: "é¦™è•‰", ex: "Monkeys love  bananas . (çŒ´å­æ„›åƒé¦™è•‰ã€‚)" },
            { word: "band", pos: "noun", def: "æ¨‚åœ˜", ex: "They started a rock  band . (ä»–å€‘çµ„äº†ä¸€å€‹æ–æ»¾æ¨‚åœ˜ã€‚)" },
            { word: "bank", pos: "noun", def: "éŠ€è¡Œ", ex: "I need to go to the  bank . (æˆ‘éœ€è¦å»éŠ€è¡Œã€‚)" },
            { word: "bar", pos: "noun", def: "æ¢ã€é…’å§", ex: "He ate a chocolate  bar . (ä»–åƒäº†ä¸€æ¢å·§å…‹åŠ›ã€‚)" },
            { word: "barbecue", pos: "noun/verb", def: "çƒ¤è‚‰", ex: "Let's have a  barbecue  this weekend. (æˆ‘å€‘é€™é€±æœ«çƒ¤è‚‰å§ã€‚)" },
            { word: "barber", pos: "noun", def: "ç†é«®å¸«", ex: "The  barber  cut my hair. (ç†é«®å¸«å‰ªäº†æˆ‘çš„é ­é«®ã€‚)" },
            { word: "bark", pos: "verb", def: "å å«", ex: "The dog  barks  loudly. (é‚£éš»ç‹—å«å¾ˆå¤§è²ã€‚)" },
            { word: "base", pos: "noun", def: "åŸºç¤ã€å£˜åŒ…", ex: "He ran to first  base . (ä»–è·‘å‘ä¸€å£˜ã€‚)" },
            { word: "baseball", pos: "noun", def: "æ£’çƒ", ex: "Let's play  baseball . (æˆ‘å€‘ä¾†æ‰“æ£’çƒå§ã€‚)" },
            { word: "basement", pos: "noun", def: "åœ°ä¸‹å®¤", ex: "The car is in the  basement . (è»Šå­åœ¨åœ°ä¸‹å®¤ã€‚)" },
            { word: "basic", pos: "adj.", def: "åŸºæœ¬çš„", ex: "We need  basic  tools. (æˆ‘å€‘éœ€è¦åŸºæœ¬å·¥å…·ã€‚)" },
            { word: "basket", pos: "noun", def: "ç±ƒå­", ex: "Put the apples in the  basket . (æŠŠè˜‹æœæ”¾é€²ç±ƒå­è£¡ã€‚)" },
            { word: "basketball", pos: "noun", def: "ç±ƒçƒ", ex: "He is good at  basketball . (ä»–æ“…é•·æ‰“ç±ƒçƒã€‚)" },
            { word: "bat", pos: "noun", def: "çƒæ£’ã€è™è ", ex: "He hit the ball with a  bat . (ä»–ç”¨çƒæ£’æ“Šçƒã€‚)" },
            { word: "bath", pos: "noun", def: "æ¾¡", ex: "I take a  bath  every night. (æˆ‘æ¯æ™šéƒ½æ³¡æ¾¡ã€‚)" },
            { word: "bathroom", pos: "noun", def: "æµ´å®¤ã€å»æ‰€", ex: "May I use the  bathroom ? (æˆ‘å¯ä»¥å€Ÿç”¨å»æ‰€å—ï¼Ÿ)" },
            { word: "beach", pos: "noun", def: "æµ·ç˜", ex: "We walked on the  beach . (æˆ‘å€‘åœ¨æµ·ç˜ä¸Šæ•£æ­¥ã€‚)" },
            { word: "bean", pos: "noun", def: "è±†å­", ex: "I like green  beans . (æˆ‘å–œæ­¡å››å­£è±†ã€‚)" },
            { word: "bear", pos: "noun", def: "ç†Š", ex: "We saw a  bear  at the zoo. (æˆ‘å€‘åœ¨å‹•ç‰©åœ’çœ‹åˆ°ä¸€éš»ç†Šã€‚)" },
            { word: "beautiful", pos: "adj.", def: "ç¾éº—çš„", ex: "The flower is  beautiful . (é€™æœµèŠ±å¾ˆç¾ã€‚)" },
            { word: "because", pos: "conj.", def: "å› ç‚º", ex: "I am happy  because  I passed the test. (æˆ‘å¾ˆé–‹å¿ƒå› ç‚ºæˆ‘é€šéè€ƒè©¦äº†ã€‚)" },
            { word: "become", pos: "verb", def: "è®Šæˆ", ex: "He wants to  become  a doctor. (ä»–æƒ³æˆç‚ºä¸€ä½é†«ç”Ÿã€‚)" },
            { word: "bed", pos: "noun", def: "åºŠ", ex: "It is time for  bed . (è©²ä¸ŠåºŠç¡è¦ºäº†ã€‚)" },
            { word: "bedroom", pos: "noun", def: "è‡¥å®¤", ex: "My  bedroom  is small but cozy. (æˆ‘çš„è‡¥å®¤é›–å°ä½†å¾ˆèˆ’é©ã€‚)" },
            { word: "bee", pos: "noun", def: "èœœèœ‚", ex: "A  bee  is flying around the flower. (ä¸€éš»èœœèœ‚åœ¨èŠ±æœµæ—é£›èˆã€‚)" },
            { word: "beef", pos: "noun", def: "ç‰›è‚‰", ex: "I don't eat  beef . (æˆ‘ä¸åƒç‰›è‚‰ã€‚)" },
            { word: "beer", pos: "noun", def: "å•¤é…’", ex: "He drank a glass of  beer . (ä»–å–äº†ä¸€æ¯å•¤é…’ã€‚)" },
            { word: "before", pos: "prep./adv.", def: "åœ¨...ä¹‹å‰", ex: "Wash your hands  before  dinner. (æ™šé¤å‰è¦æ´—æ‰‹ã€‚)" },
            { word: "begin", pos: "verb", def: "é–‹å§‹", ex: "Let's  begin  the class. (æˆ‘å€‘é–‹å§‹ä¸Šèª²å§ã€‚)" },
            { word: "behind", pos: "prep.", def: "åœ¨...å¾Œé¢", ex: "The cat is  behind  the sofa. (è²“åœ¨æ²™ç™¼å¾Œé¢ã€‚)" },
            { word: "believe", pos: "verb", def: "ç›¸ä¿¡", ex: "I  believe  in you. (æˆ‘ç›¸ä¿¡ä½ ã€‚)" },
            { word: "bell", pos: "noun", def: "éˆ´", ex: "The school  bell  rang. (å­¸æ ¡é˜è²éŸ¿äº†ã€‚)" },
            { word: "belong", pos: "verb", def: "å±¬æ–¼", ex: "This book  belongs  to me. (é€™æœ¬æ›¸æ˜¯æˆ‘çš„ã€‚)" },
            { word: "below", pos: "prep./adv.", def: "åœ¨...ä¸‹æ–¹", ex: "Please sign your name  below . (è«‹åœ¨ä¸‹æ–¹ç°½åã€‚)" },
            { word: "bench", pos: "noun", def: "é•·æ¤…", ex: "We sat on a  bench  in the park. (æˆ‘å€‘ååœ¨å…¬åœ’çš„é•·æ¤…ä¸Šã€‚)" },
            { word: "beside", pos: "prep.", def: "åœ¨...æ—é‚Š", ex: "Sit  beside  me. (åæˆ‘æ—é‚Šã€‚)" },
            { word: "best", pos: "adj./adv.", def: "æœ€å¥½çš„", ex: "She is my  best  friend. (å¥¹æ˜¯æˆ‘æœ€å¥½çš„æœ‹å‹ã€‚)" },
            { word: "better", pos: "adj./adv.", def: "è¼ƒå¥½çš„", ex: "I feel much  better  now. (æˆ‘ç¾åœ¨æ„Ÿè¦ºå¥½å¤šäº†ã€‚)" },
            { word: "between", pos: "prep.", def: "åœ¨...ä¹‹é–“", ex: "The shop is  between  the bank and the park. (å•†åº—åœ¨éŠ€è¡Œå’Œå…¬åœ’ä¹‹é–“ã€‚)" },
            { word: "beyond", pos: "prep.", def: "è¶…è¶Š", ex: "That is  beyond  my ability. (é‚£è¶…å‡ºäº†æˆ‘çš„èƒ½åŠ›ç¯„åœã€‚)" },
            { word: "bicycle", pos: "noun", def: "è…³è¸è»Š", ex: "He rides a  bicycle  to school. (ä»–é¨è…³è¸è»Šä¸Šå­¸ã€‚)" },
            { word: "big", pos: "adj.", def: "å¤§çš„", ex: "Elephants are very  big . (å¤§è±¡éå¸¸å¤§ã€‚)" },
            { word: "bike", pos: "noun", def: "è…³è¸è»Š", ex: "Let's go for a  bike  ride. (æˆ‘å€‘å»é¨è…³è¸è»Šå§ã€‚)" },
            { word: "bill", pos: "noun", def: "å¸³å–®", ex: "Can I have the  bill , please? (è«‹çµ¦æˆ‘å¸³å–®å¥½å—ï¼Ÿ) "},
            { word: "bird", pos: "noun", def: "é³¥", ex: "The  bird  is singing. (é³¥å…’åœ¨å”±æ­Œã€‚)" },
            { word: "birth", pos: "noun", def: "å‡ºç”Ÿ", ex: "What is your date of  birth ? (ä½ çš„å‡ºç”Ÿæ—¥æœŸæ˜¯å¹¾è™Ÿï¼Ÿ)" },
            { word: "birthday", pos: "noun", def: "ç”Ÿæ—¥", ex: "Happy  birthday ! (ç”Ÿæ—¥å¿«æ¨‚ï¼)" },
            { word: "bite", pos: "verb", def: "å’¬", ex: "The dog might  bite . (é‚£éš»ç‹—å¯èƒ½æœƒå’¬äººã€‚)" },
            { word: "black", pos: "adj./noun", def: "é»‘è‰²çš„", ex: "I have a  black  cat. (æˆ‘æœ‰ä¸€éš»é»‘è²“ã€‚)" },
            { word: "blackboard", pos: "noun", def: "é»‘æ¿", ex: "The teacher wrote on the  blackboard . (è€å¸«å¯«åœ¨é»‘æ¿ä¸Šã€‚)" },
            { word: "blanket", pos: "noun", def: "æ¯›æ¯¯", ex: "It's cold, I need a  blanket . (å¥½å†·ï¼Œæˆ‘éœ€è¦ä¸€æ¢æ¯¯å­ã€‚) "},
            { word: "blind", pos: "adj.", def: "ççš„", ex: "He helps  blind  people cross the street. (ä»–å¹«åŠ©ç›²äººéé¦¬è·¯ã€‚)" },
            { word: "block", pos: "noun/verb", def: "è¡—å€ï¼›é˜»æ“‹", ex: "Walk two  blocks  and turn left. (èµ°å…©å€‹è¡—å€ç„¶å¾Œå·¦è½‰ã€‚)" },
            { word: "blood", pos: "noun", def: "è¡€", ex: "Blood  is red. (è¡€æ˜¯ç´…è‰²çš„ã€‚)" },
            { word: "blow", pos: "verb", def: "å¹", ex: "The wind is  blowing . (é¢¨æ­£åœ¨å¹ã€‚)" },
            { word: "blue", pos: "adj./noun", def: "è—è‰²çš„", ex: "The sky is  blue . (å¤©ç©ºæ˜¯è—è‰²çš„ã€‚)" },
            { word: "boat", pos: "noun", def: "èˆ¹ (å°èˆ¹)", ex: "They rowed the  boat  across the lake. (ä»–å€‘åˆ’èˆ¹éæ¹–ã€‚)" },
            { word: "body", pos: "noun", def: "èº«é«”", ex: "Exercise is good for your  body . (é‹å‹•å°èº«é«”æœ‰ç›Šã€‚)" },
            { word: "boil", pos: "verb", def: "ç…®æ²¸", ex: "Please  boil  some water. (è«‹ç…®é»æ°´ã€‚)" },
            { word: "bomb", pos: "noun", def: "ç‚¸å½ˆ", ex: "The  bomb  exploded. (ç‚¸å½ˆçˆ†ç‚¸äº†ã€‚)" },
            { word: "bone", pos: "noun", def: "éª¨é ­", ex: "The dog is chewing a  bone . (ç‹—æ­£åœ¨å•ƒéª¨é ­ã€‚)" },
            { word: "book", pos: "noun", def: "æ›¸", ex: "I love reading  books . (æˆ‘æ„›çœ‹æ›¸ã€‚)" },
            { word: "bookstore", pos: "noun", def: "æ›¸åº—", ex: "I bought a pen at the  bookstore . (æˆ‘åœ¨æ›¸åº—è²·äº†ä¸€æç­†ã€‚)" },
            { word: "bored", pos: "adj.", def: "æ„Ÿåˆ°ç„¡èŠçš„", ex: "I am  bored . (æˆ‘è¦ºå¾—å¥½ç„¡èŠã€‚)" },
            { word: "boring", pos: "adj.", def: "ä»¤äººçš„ç„¡èŠçš„", ex: "This movie is  boring . (é€™éƒ¨é›»å½±å¾ˆç„¡èŠã€‚)" },
            { word: "born", pos: "verb", def: "å‡ºç”Ÿ", ex: "I was  born  in Taipei. (æˆ‘åœ¨å°åŒ—å‡ºç”Ÿã€‚)" },
            { word: "borrow", pos: "verb", def: "å€Ÿå…¥", ex: "Can I  borrow  your pen? (æˆ‘å¯ä»¥å€Ÿä½ çš„ç­†å—ï¼Ÿ)" },
            { word: "boss", pos: "noun", def: "è€é—†", ex: "My  boss  is very kind. (æˆ‘çš„è€é—†å¾ˆè¦ªåˆ‡ã€‚)" },
            { word: "both", pos: "adj./pron.", def: "å…©è€…éƒ½", ex: "Both  of them are my friends. (ä»–å€‘å…©å€‹éƒ½æ˜¯æˆ‘çš„æœ‹å‹ã€‚)" },
            { word: "bother", pos: "verb", def: "æ‰“æ“¾", ex: "Don't  bother  me while I'm studying. (æˆ‘è®€æ›¸æ™‚åˆ¥æ‰“æ“¾æˆ‘ã€‚)" },
            { word: "bottle", pos: "noun", def: "ç“¶å­", ex: "I drank a  bottle  of water. (æˆ‘å–äº†ä¸€ç“¶æ°´ã€‚)" },
            { word: "bottom", pos: "noun", def: "åº•éƒ¨", ex: "Sign at the  bottom  of the page. (åœ¨é é¢åº•éƒ¨ç°½åã€‚)" },
            { word: "bow", pos: "verb/noun", def: "é èº¬", ex: "They  bowed  to the teacher. (ä»–å€‘å‘è€å¸«é èº¬ã€‚)" },
            { word: "bowl", pos: "noun", def: "ç¢—", ex: "I ate a  bowl  of rice. (æˆ‘åƒäº†ä¸€ç¢—é£¯ã€‚)" },
            { word: "box", pos: "noun", def: "ç›’å­", ex: "What is inside the  box ? (ç›’å­è£¡æœ‰ä»€éº¼ï¼Ÿ)" },
            { word: "boy", pos: "noun", def: "ç”·å­©", ex: "The  boy  is playing soccer. (é‚£å€‹ç”·å­©æ­£åœ¨è¸¢è¶³çƒã€‚)" },
            { word: "bread", pos: "noun", def: "éºµåŒ…", ex: "I eat  bread  for breakfast. (æˆ‘æ—©é¤åƒéºµåŒ…ã€‚)" },
            { word: "break", pos: "verb/noun", def: "æ‰“ç ´ï¼›ä¼‘æ¯", ex: "Don't  break  the glass. (ä¸è¦æ‰“ç ´ç»ç’ƒã€‚)" },
            { word: "breakfast", pos: "noun", def: "æ—©é¤", ex: "I had eggs for  breakfast . (æˆ‘æ—©é¤åƒäº†è›‹ã€‚)" },
            { word: "bridge", pos: "noun", def: "æ©‹", ex: "We crossed the  bridge . (æˆ‘å€‘éäº†æ©‹ã€‚)" },
            { word: "bright", pos: "adj.", def: "æ˜äº®çš„", ex: "The sun is very  bright . (å¤ªé™½éå¸¸è€€çœ¼ã€‚)" },
            { word: "bring", pos: "verb", def: "å¸¶ä¾†", ex: "Please  bring  me a cup of water. (è«‹æ‹¿ä¸€æ¯æ°´çµ¦æˆ‘ã€‚)" },
            { word: "brother", pos: "noun", def: "å…„å¼Ÿ", ex: "I have one  brother . (æˆ‘æœ‰ä¸€å€‹å…„å¼Ÿã€‚)" },
            { word: "brown", pos: "adj./noun", def: "è¤è‰²çš„", ex: "She has  brown  hair. (å¥¹æœ‰è¤è‰²çš„é ­é«®ã€‚)" },
            { word: "brush", pos: "verb/noun", def: "åˆ·", ex: "Brush  your teeth every day. (æ¯å¤©éƒ½è¦åˆ·ç‰™ã€‚)" },
            { word: "build", pos: "verb", def: "å»ºé€ ", ex: "They will  build  a new house. (ä»–å€‘å°‡å»ºé€ ä¸€æ£Ÿæ–°æˆ¿å­ã€‚)" },
            { word: "building", pos: "noun", def: "å»ºç¯‰ç‰©", ex: "That is a tall  building . (é‚£æ˜¯ä¸€æ£Ÿé«˜æ¨“ã€‚)" },
            { word: "burn", pos: "verb", def: "ç‡ƒç‡’", ex: "The fire is  burning . (ç«æ­£åœ¨ç‡ƒç‡’ã€‚)" },
            { word: "bus", pos: "noun", def: "å…¬è»Š", ex: "I take the  bus  to school. (æˆ‘æ­å…¬è»Šä¸Šå­¸ã€‚)" },
            { word: "business", pos: "noun", def: "ç”Ÿæ„ã€å•†æ¥­", ex: "He is in the computer  business . (ä»–åœ¨ä¸€å®¶é›»è…¦å…¬å¸å·¥ä½œã€‚)" },
            { word: "busy", pos: "adj.", def: "å¿™ç¢Œçš„", ex: "I am very  busy  today. (æˆ‘ä»Šå¤©å¾ˆå¿™ã€‚)" },
            { word: "but", pos: "conj.", def: "ä½†æ˜¯", ex: "It is cheap  but  good. (å®ƒå¾ˆä¾¿å®œä½†æ˜¯å¾ˆå¥½ã€‚)" },
            { word: "butter", pos: "noun", def: "å¥¶æ²¹", ex: "Do you want  butter  on your toast? (ä½ çš„åå¸è¦å¡—å¥¶æ²¹å—ï¼Ÿ)" },
            { word: "butterfly", pos: "noun", def: "è´è¶", ex: "The  butterfly  is beautiful. (é€™éš»è´è¶å¾ˆç¾ã€‚)" },
            { word: "buy", pos: "verb", def: "è²·", ex: "I want to  buy  a new car. (æˆ‘æƒ³è²·ä¸€è¼›æ–°è»Šã€‚)" },
            { word: "by", pos: "prep.", def: "è—‰ç”±ã€åœ¨æ—é‚Š", ex: "I go to school  by  bus. (æˆ‘æ­å…¬è»Šå»ä¸Šå­¸ã€‚)" }
        ];

        let currentIndex = 0;
        let activeList = []; 
        
        let cardElement, wordEl, posEl, defEl, sentenceEl;

        document.addEventListener('DOMContentLoaded', () => {
            cardElement = document.getElementById('card');
            wordEl = document.getElementById('word');
            posEl = document.getElementById('pos');
            defEl = document.getElementById('def');
            sentenceEl = document.getElementById('sentence');
            
            loadProgress();
        });


        function loadProgress() {
            // æ³¨æ„ï¼šé€™è£¡å°‡ key æ”¹ç‚º masteredWords_B
            const mastered = JSON.parse(localStorage.getItem('masteredWords_B')) || []; 
            activeList = vocabData.filter(item => !mastered.includes(item.word));
            
            if (activeList.length === 0) {
                showEmptyState();
            } else {
                document.getElementById('card-container').style.display = 'block';
                document.getElementById('controls').style.display = 'flex';
                document.getElementById('empty-state').style.display = 'none';
                document.querySelector('.progress').style.display = 'block';
                renderCard();
            }
            updateCount();
        }

        
        function renderCard() {
            if (activeList.length === 0) return;
            
            if (currentIndex >= activeList.length) currentIndex = 0;
            if (currentIndex < 0) currentIndex = activeList.length - 1;

            const item = activeList[currentIndex];
            wordEl.textContent = item.word;
            posEl.textContent = item.pos;
            defEl.textContent = item.def;
            sentenceEl.innerHTML = item.ex.replace(/\n/g, "<br>");
            
            cardElement.classList.remove('is-flipped');
        }

        function flipCard() {
            speechSynthesis.cancel();
            if (cardElement) {
               cardElement.classList.toggle('is-flipped');
            }
        }

        function playAudio(event) {
            event.stopPropagation();

            if (activeList.length === 0) return;

            const word = activeList[currentIndex].word;
            
            speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(word);
            utterance.lang = 'en-US'; 
            utterance.rate = 0.8; 

            speechSynthesis.speak(utterance);
        }

        function nextCard() {
            currentIndex++;
            renderCard();
            updateCount();
        }

        function prevCard() {
            currentIndex--;
            renderCard();
            updateCount();
        }

        function markMastered() {
            if (activeList.length === 0) return;
            
            const currentWord = activeList[currentIndex].word;
            
            let mastered = JSON.parse(localStorage.getItem('masteredWords_B')) || [];
            if (!mastered.includes(currentWord)) {
                mastered.push(currentWord);
                localStorage.setItem('masteredWords_B', JSON.stringify(mastered));
            }

            activeList.splice(currentIndex, 1);
            
            if (activeList.length === 0) {
                showEmptyState();
            } else {
                renderCard();
            }
            updateCount();
        }

        function markLearning() {
            nextCard();
        }

        function showEmptyState() {
            document.getElementById('card-container').style.display = 'none';
            document.getElementById('controls').style.display = 'none';
            document.getElementById('empty-state').style.display = 'block';
            document.querySelector('.progress').style.display = 'none';
        }

        function resetProgress() {
            localStorage.removeItem('masteredWords_B');
            location.reload(); 
        }

        function confirmReset() {
            if (confirm("ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰ç´€éŒ„ï¼Œé‡æ–°ç·´ç¿’æ‰€æœ‰å–®å­—å—ï¼Ÿ")) {
                resetProgress();
            }
        }

        function updateCount() {
            document.getElementById('current-index').textContent = activeList.length > 0 ? currentIndex + 1 : 0;
            // ã€é‡è¦ä¿®æ­£ã€‘é€™è£¡æ”¹ç‚ºé¡¯ç¤º activeList çš„é•·åº¦
            document.getElementById('total-count').textContent = activeList.length; 
        }
        
    </script>
</body>
</html>