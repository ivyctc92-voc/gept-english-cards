<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šå·´èƒºè‹±èªå–®å­—å¡ - å­—æ¯F</title>
    <style>
        :root {
            /* å¤šå·´èƒºè‰²ç¥¨ Dopamine Palette */
            --bg-color: #FFFBEB; /* æŸ”å’Œé»ƒåº• */
            --card-front: #FFDE59; /* äº®é»ƒ */
            --card-back: #7ED957; /* é®®ç¶  */
            --text-primary: #333;
            --btn-master: #FF5757; /* çŠç‘šç´… */
            --btn-learn: #5CE1E6; /* äº®é’ */
            --btn-arrow: #CB6CE6; /* ç´«è‰² */
            --btn-reset: #FF9F1C; /* é®®æ©˜è‰² */
        }

        body {
            font-family: "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            position: relative;
        }

        /* å³ä¸Šè§’é‡ç½®æŒ‰éˆ• */
        .reset-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: var(--btn-reset);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
            transition: transform 0.1s;
            z-index: 100;
        }

        .reset-btn:active {
            transform: translateY(2px);
            box-shadow: none;
        }

        /* å¡ç‰‡å®¹å™¨èˆ‡ç¿»è½‰æ•ˆæœ */
        .card-container {
            width: 90%;
            max-width: 400px;
            height: 500px;
            perspective: 1000px;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
            border-radius: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 30px;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
            border: 5px solid #fff;
        }

        /* æ­£é¢è¨­è¨ˆ */
        .card-front {
            background-color: var(--card-front);
            color: var(--text-primary);
        }

        /* å–‡å­åœ–ç¤ºæ¨£å¼ */
        .speaker-icon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 3rem; /* åœ–ç¤ºå¤§å° */
            cursor: pointer;
            background: rgba(255,255,255,0.4);
            width: 60px;
            height: 60px;
            line-height: 60px;
            border-radius: 50%;
            transition: transform 0.2s, background 0.2s;
            z-index: 50; /* ç¢ºä¿å®ƒåœ¨æœ€ä¸Šå±¤ */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .speaker-icon:hover {
            transform: scale(1.1);
            background: rgba(255,255,255,0.8);
        }

        .speaker-icon:active {
            transform: scale(0.95);
        }

        .english-word {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            color: #FF6B6B;
            text-shadow: 2px 2px 0px #FFF;
        }

        .pos-tag {
            background: #FFF;
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #555;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
        }

        /* èƒŒé¢è¨­è¨ˆ */
        .card-back {
            background-color: var(--card-back);
            color: var(--text-primary);
            transform: rotateY(180deg);
        }

        .chinese-def {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #FFF;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
        }

        .example-sentence {
            font-size: 1.4rem;
            line-height: 1.6;
            background: rgba(255,255,255,0.3);
            padding: 15px;
            border-radius: 15px;
            white-space: pre-wrap; /* è®“ä¾‹å¥ä¸­çš„æ›è¡Œç¬¦è™Ÿç”Ÿæ•ˆ */
        }

        /* æ§åˆ¶å€ */
        .controls {
            display: flex;
            gap: 20px;
            align-items: center;
            width: 90%;
            max-width: 400px;
            justify-content: space-between;
        }

        .arrow-btn {
            background: var(--btn-arrow);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }

        .action-btn {
            border: none;
            padding: 15px 25px;
            border-radius: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
            flex: 1;
        }

        .btn-master { background-color: var(--btn-master); }
        .btn-learn { background-color: var(--btn-learn); color: #333; }
        
        button:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .progress {
            margin-top: 20px;
            font-size: 1rem;
            color: #888;
        }
        
        .empty-state {
            display: none;
            text-align: center;
            font-size: 1.5rem;
            color: #333;
        }

    </style>
</head>
<body>

    <button class="reset-btn" onclick="confirmReset()">ğŸ”„ å…¨éƒ¨é‡ä¾†</button>

    <div class="progress">é€²åº¦ï¼š<span id="current-index">0</span> / <span id="total-count">0</span></div>

    <div class="card-container" id="card-container" onclick="flipCard()">
        <div class="card" id="card">
            <div class="card-face card-front">
                <div class="speaker-icon" onclick="playAudio(event)">ğŸ”Š</div>
                
                <div class="english-word" id="word"></div>
                <div class="pos-tag" id="pos"></div>
                <div style="margin-top:20px; font-size: 0.9rem; opacity: 0.7;">(é»æ“Šå¡ç‰‡ç¿»é¢)</div>
            </div>
            <div class="card-face card-back">
                <div class="chinese-def" id="def"></div>
                <div class="example-sentence" id="sentence"></div>
            </div>
        </div>
    </div>
    
    <div class="empty-state" id="empty-state">
        <h2>ğŸ‰ å¤ªæ£’äº†ï¼</h2>
        <p>æ‰€æœ‰å–®å­—éƒ½å·²ç²¾ç†Ÿï¼</p>
        <button class="action-btn btn-learn" onclick="resetProgress()">é‡æ–°é–‹å§‹</button>
    </div>

    <div class="controls" id="controls">
        <button class="arrow-btn" onclick="prevCard()">&#8592;</button>
        <button class="action-btn btn-master" onclick="markMastered()">ğŸ’– å·²ç²¾ç†Ÿ</button>
        <button class="action-btn btn-learn" onclick="markLearning()">ğŸ’ª å­¸ç¿’ä¸­</button>
        <button class="arrow-btn" onclick="nextCard()">&#8594;</button>
    </div>

    <script>
        // è³‡æ–™ä¾†æºï¼šå­—æ¯F å–®å­—åˆ—è¡¨
        const vocabData = [
            { word: "face", pos: "noun/verb", def: "è‡‰ã€é¢å°", ex: "Wash your face every morning. (æ¯å¤©æ—©ä¸Šæ´—è‡‰ã€‚)" },
            { word: "fact", pos: "noun", def: "äº‹å¯¦", ex: "Is that a fact? (é‚£æ˜¯äº‹å¯¦å—ï¼Ÿ)" },
            { word: "factory", pos: "noun", def: "å·¥å» ", ex: "He works in a shoe factory. (ä»–åœ¨ä¸€å®¶é‹å» å·¥ä½œã€‚)" },
            { word: "fail", pos: "verb", def: "å¤±æ•—ã€ä¸åŠæ ¼", ex: "Don't be afraid to fail. (ä¸è¦å®³æ€•å¤±æ•—ã€‚)" },
            { word: "fair", pos: "adj.", def: "å…¬å¹³çš„", ex: "That's not fair! (é‚£ä¸å…¬å¹³ï¼)" },
            { word: "fall", pos: "verb/noun", def: "è·Œå€’ã€ç§‹å¤©", ex: "Leaves fall in autumn. (è‘‰å­åœ¨ç§‹å¤©è½ä¸‹ã€‚)" },
            { word: "family", pos: "noun", def: "å®¶åº­", ex: "I love my family. (æˆ‘æ„›æˆ‘çš„å®¶äººã€‚)" },
            { word: "famous", pos: "adj.", def: "æœ‰åçš„", ex: "He is a famous singer. (ä»–æ˜¯æœ‰åçš„æ­Œæ‰‹ã€‚)" },
            { word: "fan", pos: "noun", def: "é¢¨æ‰‡ã€è¿·", ex: "Turn on the fan. (æ‰“é–‹é›»é¢¨æ‰‡ã€‚)" },
            { word: "far", pos: "adj./adv.", def: "é çš„", ex: "Is the station far from here? (è»Šç«™é›¢é€™è£¡é å—ï¼Ÿ)" },
            { word: "farm", pos: "noun", def: "è¾²å ´", ex: "They live on a farm. (ä»–å€‘ä½åœ¨è¾²å ´ä¸Šã€‚)" },
            { word: "farmer", pos: "noun", def: "è¾²å¤«", ex: "The farmer grows corn. (é‚£ä½è¾²å¤«ç¨®æ¤ç‰ç±³ã€‚)" },
            { word: "fast", pos: "adj./adv.", def: "å¿«é€Ÿçš„", ex: "She runs very fast. (å¥¹è·‘å¾—å¾ˆå¿«ã€‚)" },
            { word: "fat", pos: "adj./noun", def: "èƒ–çš„ã€è„‚è‚ª", ex: "The cat is fat. (é‚£éš»è²“å¾ˆèƒ–ã€‚)" },
            { word: "father", pos: "noun", def: "çˆ¶è¦ª", ex: "My father is a teacher. (æˆ‘çˆ¶è¦ªæ˜¯è€å¸«ã€‚)" },
            { word: "fear", pos: "noun/verb", def: "ææ‡¼", ex: "She has a fear of spiders. (å¥¹å®³æ€•èœ˜è››ã€‚)" },
            { word: "feather", pos: "noun", def: "ç¾½æ¯›", ex: "Light as a feather. (è¼•å¦‚é´»æ¯›ã€‚)" },
            { word: "feed", pos: "verb", def: "é¤µé¤Š", ex: "Don't feed the animals. (è«‹å‹¿é¤µé£Ÿå‹•ç‰©ã€‚)" },
            { word: "feel", pos: "verb", def: "æ„Ÿè¦º", ex: "I feel happy today. (æˆ‘ä»Šå¤©æ„Ÿè¦ºå¾ˆé–‹å¿ƒã€‚)" },
            { word: "feeling", pos: "noun", def: "æ„Ÿè¦ºã€æ„Ÿæƒ…", ex: "I have a bad feeling about this. (æˆ‘å°é€™ä»¶äº‹æœ‰ä¸å¥½çš„é æ„Ÿã€‚)" },
            { word: "female", pos: "adj./noun", def: "å¥³æ€§çš„", ex: "The lion is female. (é€™éš»ç…å­æ˜¯æ¯çš„ã€‚)" },
            { word: "fence", pos: "noun", def: "æŸµæ¬„", ex: "The dog jumped over the fence. (ç‹—è·³éäº†æŸµæ¬„ã€‚)" },
            { word: "festival", pos: "noun", def: "ç¯€æ…¶", ex: "The Lantern Festival is coming. (å…ƒå®µç¯€å¿«åˆ°äº†ã€‚)" },
            { word: "fever", pos: "noun", def: "ç™¼ç‡’", ex: "I have a high fever. (æˆ‘ç™¼é«˜ç‡’äº†ã€‚)" },
            { word: "few", pos: "adj./pron.", def: "å¾ˆå°‘", ex: "Few people know the truth. (å¾ˆå°‘äººçŸ¥é“çœŸç›¸ã€‚)" },
            { word: "field", pos: "noun", def: "ç”°é‡ã€é ˜åŸŸ", ex: "The cows are in the field. (ä¹³ç‰›åœ¨ç”°é‡è£¡ã€‚)" },
            { word: "fight", pos: "verb/noun", def: "æ‰“æ¶ã€çˆ­åµ", ex: "Don't fight with your brother. (åˆ¥è·Ÿä½ çš„å…„å¼Ÿæ‰“æ¶ã€‚)" },
            { word: "fill", pos: "verb", def: "è£æ»¿", ex: "Fill the glass with water. (æŠŠæ¯å­è£æ»¿æ°´ã€‚)" },
            { word: "film", pos: "noun", def: "é›»å½±ã€åº•ç‰‡", ex: "We watched a funny film. (æˆ‘å€‘çœ‹äº†ä¸€éƒ¨æœ‰è¶£çš„é›»å½±ã€‚)" },
            { word: "final", pos: "adj.", def: "æœ€å¾Œçš„", ex: "This is my final offer. (é€™æ˜¯æˆ‘æœ€å¾Œçš„å‡ºåƒ¹ã€‚)" },
            { word: "finally", pos: "adv.", def: "çµ‚æ–¼", ex: "Finally, we arrived home. (æˆ‘å€‘çµ‚æ–¼åˆ°å®¶äº†ã€‚)" },
            { word: "find", pos: "verb", def: "æ‰¾åˆ°", ex: "I cannot find my keys. (æˆ‘æ‰¾ä¸åˆ°æˆ‘çš„é‘°åŒ™ã€‚)" },
            { word: "fine", pos: "adj.", def: "å¥½çš„ã€ç²¾ç´°çš„", ex: "I am fine, thank you. (æˆ‘å¾ˆå¥½ï¼Œè¬è¬ã€‚)" },
            { word: "finger", pos: "noun", def: "æ‰‹æŒ‡", ex: "He pointed his finger at me. (ä»–ç”¨æ‰‹æŒ‡è‘—æˆ‘ã€‚)" },
            { word: "finish", pos: "verb", def: "å®Œæˆ", ex: "Did you finish your homework? (ä½ åšå®ŒåŠŸèª²äº†å—ï¼Ÿ)" },
            { word: "fire", pos: "noun/verb", def: "ç«", ex: "Don't play with fire. (ä¸è¦ç©ç«ã€‚)" },
            { word: "firm", pos: "noun/adj.", def: "å…¬å¸ã€å …å›ºçš„", ex: "He works for a law firm. (ä»–åœ¨ä¸€å®¶å¾‹å¸«äº‹å‹™æ‰€å·¥ä½œã€‚)" },
            { word: "first", pos: "adj./adv.", def: "ç¬¬ä¸€", ex: "Who finished first? (èª°ç¬¬ä¸€åï¼Ÿ)" },
            { word: "fish", pos: "noun/verb", def: "é­šã€é‡£é­š", ex: "Fish live in water. (é­šä½åœ¨æ°´è£¡ã€‚)" },
            { word: "fisherman", pos: "noun", def: "æ¼å¤«", ex: "The fisherman caught a big fish. (æ¼å¤«æŠ“åˆ°ä¸€æ¢å¤§é­šã€‚)" },
            { word: "fit", pos: "verb/adj.", def: "é©åˆã€å¥åº·çš„", ex: "This shirt fits me well. (é€™ä»¶è¥¯è¡«å¾ˆåˆæˆ‘çš„èº«ã€‚)" },
            { word: "five", pos: "num.", def: "äº”", ex: "Give me five minutes. (çµ¦æˆ‘äº”åˆ†é˜ã€‚)" },
            { word: "fix", pos: "verb", def: "ä¿®ç†", ex: "Can you fix my bike? (ä½ èƒ½ä¿®æˆ‘çš„è…³è¸è»Šå—ï¼Ÿ)" },
            { word: "flag", pos: "noun", def: "æ——å­", ex: "Raise the flag. (å‡æ——ã€‚)" },
            { word: "flashlight", pos: "noun", def: "æ‰‹é›»ç­’", ex: "It's dark, bring a flashlight. (å¾ˆæš—ï¼Œå¸¶æŠŠæ‰‹é›»ç­’ã€‚)" },
            { word: "flat", pos: "adj./noun", def: "å¹³å¦çš„ã€å…¬å¯“", ex: "The tire is flat. (è¼ªèƒæ‰äº†/çˆ†èƒäº†ã€‚)" },
            { word: "flavor", pos: "noun", def: "å£å‘³", ex: "Which flavor do you like? (ä½ å–œæ­¡å“ªç¨®å£å‘³ï¼Ÿ)" },
            { word: "flight", pos: "noun", def: "ç­æ©Ÿã€é£›è¡Œ", ex: "Have a nice flight. (ç¥ä½ æ—…é€”æ„‰å¿«ã€‚)" },
            { word: "floor", pos: "noun", def: "åœ°æ¿ã€æ¨“å±¤", ex: "Don't sit on the floor. (ä¸è¦ååœ¨åœ°æ¿ä¸Šã€‚)" },
            { word: "flour", pos: "noun", def: "éºµç²‰", ex: "We need flour to make bread. (æˆ‘å€‘éœ€è¦éºµç²‰ä¾†åšéºµåŒ…ã€‚)" },
            { word: "flower", pos: "noun", def: "èŠ±", ex: "This flower smells sweet. (é€™æœµèŠ±èèµ·ä¾†å¾ˆé¦™ã€‚)" },
            { word: "flu", pos: "noun", def: "æµæ„Ÿ", ex: "He caught the flu. (ä»–å¾—äº†æµæ„Ÿã€‚)" },
            { word: "fly", pos: "verb/noun", def: "é£›ã€è’¼è …", ex: "Birds can fly. (é³¥æœƒé£›ã€‚)" },
            { word: "focus", pos: "verb/noun", def: "å°ˆæ³¨", ex: "Focus on your work. (å°ˆæ³¨åœ¨ä½ çš„å·¥ä½œä¸Šã€‚)" },
            { word: "fog", pos: "noun", def: "éœ§", ex: "The fog is very thick. (éœ§å¾ˆæ¿ƒã€‚)" },
            { word: "follow", pos: "verb", def: "è·Ÿéš¨", ex: "Follow me, please. (è«‹è·Ÿæˆ‘ä¾†ã€‚)" },
            { word: "food", pos: "noun", def: "é£Ÿç‰©", ex: "Italian food is delicious. (ç¾©å¤§åˆ©é£Ÿç‰©å¾ˆç¾å‘³ã€‚)" },
            { word: "fool", pos: "noun/verb", def: "å‚»ç“œã€æ„šå¼„", ex: "Don't be a fool. (åˆ¥ç•¶å‚»ç“œã€‚)" },
            { word: "foot", pos: "noun", def: "è…³", ex: "My foot hurts. (æˆ‘çš„è…³å¾ˆç—›ã€‚)" },
            { word: "football", pos: "noun", def: "ç¾å¼è¶³çƒ/è¶³çƒ", ex: "Let's play football. (æˆ‘å€‘ä¾†è¸¢è¶³çƒå§ã€‚)" },
            { word: "for", pos: "prep.", def: "ç‚ºäº†ã€çµ¦", ex: "This gift is for you. (é€™ç¦®ç‰©æ˜¯çµ¦ä½ çš„ã€‚)" },
            { word: "force", pos: "noun/verb", def: "åŠ›é‡ã€å¼·è¿«", ex: "Don't force him to eat. (ä¸è¦å¼·è¿«ä»–åƒã€‚)" },
            { word: "foreign", pos: "adj.", def: "å¤–åœ‹çš„", ex: "She speaks two foreign languages. (å¥¹æœƒèªªå…©ç¨®å¤–èªã€‚)" },
            { word: "foreigner", pos: "noun", def: "å¤–åœ‹äºº", ex: "Many foreigners visit Taiwan. (è¨±å¤šå¤–åœ‹äººé€ è¨ªå°ç£ã€‚)" },
            { word: "forest", pos: "noun", def: "æ£®æ—", ex: "Don't get lost in the forest. (åˆ¥åœ¨æ£®æ—è£¡è¿·è·¯äº†ã€‚)" },
            { word: "forever", pos: "adv.", def: "æ°¸é ", ex: "Friends forever. (æ°¸é çš„æœ‹å‹ã€‚)" },
            { word: "forget", pos: "verb", def: "å¿˜è¨˜", ex: "Don't forget to call me. (åˆ¥å¿˜äº†æ‰“é›»è©±çµ¦æˆ‘ã€‚)" },
            { word: "fork", pos: "noun", def: "å‰å­", ex: "Use a fork to eat the steak. (ç”¨å‰å­åƒç‰›æ’ã€‚)" },
            { word: "form", pos: "noun/verb", def: "è¡¨æ ¼ã€å½¢æˆ", ex: "Fill out this form. (å¡«å¯«é€™å¼µè¡¨æ ¼ã€‚)" },
            { word: "formal", pos: "adj.", def: "æ­£å¼çš„", ex: "Wear formal clothes to the party. (ç©¿æ­£å¼æœè£å»åƒåŠ æ´¾å°ã€‚)" },
            { word: "former", pos: "adj.", def: "å‰ä»»çš„", ex: "He is a former president. (ä»–æ˜¯å‰ä»»ç¸½çµ±ã€‚)" },
            { word: "forty", pos: "num.", def: "å››å", ex: "She is forty years old. (å¥¹å››åæ­²ã€‚)" },
            { word: "forward", pos: "adv.", def: "å‘å‰", ex: "Step forward. (å‘å‰ä¸€æ­¥ã€‚)" },
            { word: "four", pos: "num.", def: "å››", ex: "I have four apples. (æˆ‘æœ‰å››é¡†è˜‹æœã€‚)" },
            { word: "fourteen", pos: "num.", def: "åå››", ex: "The boy is fourteen. (é‚£å€‹ç”·å­©åå››æ­²ã€‚)" },
            { word: "fox", pos: "noun", def: "ç‹ç‹¸", ex: "The fox is clever. (ç‹ç‹¸å¾ˆè°æ˜ã€‚)" },
            { word: "free", pos: "adj.", def: "è‡ªç”±çš„ã€å…è²»çš„", ex: "The best things in life are free. (ç”Ÿå‘½ä¸­ç¾å¥½çš„äº‹ç‰©éƒ½æ˜¯å…è²»çš„ã€‚)" },
            { word: "freedom", pos: "noun", def: "è‡ªç”±", ex: "We value freedom. (æˆ‘å€‘é‡è¦–è‡ªç”±ã€‚)" },
            { word: "freeze", pos: "verb", def: "çµå†°ã€å‡çµ", ex: "Water freezes at 0 degrees. (æ°´åœ¨é›¶åº¦æ™‚çµå†°ã€‚)" },
            { word: "freezer", pos: "noun", def: "å†·å‡åº«", ex: "Put the ice cream in the freezer. (æŠŠå†°æ·‡æ·‹æ”¾é€²å†·å‡åº«ã€‚)" },
            { word: "fresh", pos: "adj.", def: "æ–°é®®çš„", ex: "These vegetables are fresh. (é€™äº›è”¬èœå¾ˆæ–°é®®ã€‚)" },
            { word: "Friday", pos: "noun", def: "æ˜ŸæœŸäº”", ex: "Thanks God it's Friday. (æ„Ÿè¬è€å¤©ï¼Œä»Šå¤©æ˜¯æ˜ŸæœŸäº”ã€‚) " },
            { word: "friend", pos: "noun", def: "æœ‹å‹", ex: "He is my best friend. (ä»–æ˜¯æˆ‘æœ€å¥½çš„æœ‹å‹ã€‚)" },
            { word: "friendly", pos: "adj.", def: "å‹å–„çš„", ex: "The staff is very friendly. (å“¡å·¥éå¸¸å‹å–„ã€‚)" },
            { word: "friendship", pos: "noun", def: "å‹èª¼", ex: "Our friendship is strong. (æˆ‘å€‘çš„å‹èª¼å¾ˆå …å›ºã€‚)" },
            { word: "frighten", pos: "verb", def: "ä½¿é©šåš‡", ex: "The loud noise frightened the baby. (å·¨å¤§çš„è²éŸ³åš‡åˆ°äº†å¬°å…’ã€‚)" },
            { word: "frog", pos: "noun", def: "é’è›™", ex: "A frog jumps high. (é’è›™è·³å¾ˆé«˜ã€‚)" },
            { word: "from", pos: "prep.", def: "ä¾†è‡ª", ex: "I am from Taiwan. (æˆ‘ä¾†è‡ªå°ç£ã€‚)" },
            { word: "front", pos: "noun/adj.", def: "å‰é¢", ex: "Wait at the front door. (åœ¨å‰é–€ç­‰ã€‚)" },
            { word: "fruit", pos: "noun", def: "æ°´æœ", ex: "Eat more fruit. (å¤šåƒæ°´æœã€‚)" },
            { word: "fry", pos: "verb", def: "æ²¹ç‚¸ã€ç…", ex: "Fry the egg in the pan. (åœ¨é‹å­è£¡ç…è›‹ã€‚)" },
            { word: "full", pos: "adj.", def: "æ»¿çš„ã€é£½çš„", ex: "I am full. (æˆ‘é£½äº†ã€‚)" },
            { word: "fun", pos: "noun/adj.", def: "æ¨‚è¶£ã€æœ‰è¶£çš„", ex: "Have fun! (ç©å¾—é–‹å¿ƒï¼)" },
            { word: "funny", pos: "adj.", def: "å¥½ç¬‘çš„", ex: "He told a funny joke. (ä»–è¬›äº†ä¸€å€‹å¥½ç¬‘çš„ç¬‘è©±ã€‚)" },
            { word: "furniture", pos: "noun", def: "å‚¢ä¿±", ex: "We need new furniture. (æˆ‘å€‘éœ€è¦æ–°å‚¢ä¿±ã€‚)" },
            { word: "future", pos: "noun", def: "æœªä¾†", ex: "Think about your future. (æ€è€ƒä¸€ä¸‹ä½ çš„æœªä¾†ã€‚)" }
        ];

        let currentIndex = 0;
        let activeList = []; 
        
        let cardElement, wordEl, posEl, defEl, sentenceEl;

        document.addEventListener('DOMContentLoaded', () => {
            cardElement = document.getElementById('card');
            wordEl = document.getElementById('word');
            posEl = document.getElementById('pos');
            defEl = document.getElementById('def');
            sentenceEl = document.getElementById('sentence');
            
            loadProgress();
        });


        function loadProgress() {
            // ä½¿ç”¨ masteredWords_F ä½œç‚ºç¨ç«‹çš„å„²å­˜éµå€¼
            const mastered = JSON.parse(localStorage.getItem('masteredWords_F')) || []; 
            activeList = vocabData.filter(item => !mastered.includes(item.word));
            
            if (activeList.length === 0) {
                showEmptyState();
            } else {
                document.getElementById('card-container').style.display = 'block';
                document.getElementById('controls').style.display = 'flex';
                document.getElementById('empty-state').style.display = 'none';
                document.querySelector('.progress').style.display = 'block';
                renderCard();
            }
            updateCount();
        }

        
        function renderCard() {
            if (activeList.length === 0) return;
            
            if (currentIndex >= activeList.length) currentIndex = 0;
            if (currentIndex < 0) currentIndex = activeList.length - 1;

            const item = activeList[currentIndex];
            wordEl.textContent = item.word;
            posEl.textContent = item.pos;
            defEl.textContent = item.def;
            sentenceEl.innerHTML = item.ex.replace(/\n/g, "<br>");
            
            cardElement.classList.remove('is-flipped');
        }

        function flipCard() {
            speechSynthesis.cancel();
            if (cardElement) {
               cardElement.classList.toggle('is-flipped');
            }
        }

        function playAudio(event) {
            event.stopPropagation();

            if (activeList.length === 0) return;

            const word = activeList[currentIndex].word;
            
            speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(word);
            utterance.lang = 'en-US'; 
            utterance.rate = 0.8; 

            speechSynthesis.speak(utterance);
        }

        function nextCard() {
            currentIndex++;
            renderCard();
            updateCount();
        }

        function prevCard() {
            currentIndex--;
            renderCard();
            updateCount();
        }

        function markMastered() {
            if (activeList.length === 0) return;
            
            const currentWord = activeList[currentIndex].word;
            
            // F å­—æ¯å°ˆå±¬ Key
            let mastered = JSON.parse(localStorage.getItem('masteredWords_F')) || [];
            if (!mastered.includes(currentWord)) {
                mastered.push(currentWord);
                localStorage.setItem('masteredWords_F', JSON.stringify(mastered));
            }

            activeList.splice(currentIndex, 1);
            
            if (activeList.length === 0) {
                showEmptyState();
            } else {
                renderCard();
            }
            updateCount();
        }

        function markLearning() {
            nextCard();
        }

        function showEmptyState() {
            document.getElementById('card-container').style.display = 'none';
            document.getElementById('controls').style.display = 'none';
            document.getElementById('empty-state').style.display = 'block';
            document.querySelector('.progress').style.display = 'none';
        }

        function resetProgress() {
            localStorage.removeItem('masteredWords_F');
            location.reload(); 
        }

        function confirmReset() {
            if (confirm("ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰ç´€éŒ„ï¼Œé‡æ–°ç·´ç¿’æ‰€æœ‰å–®å­—å—ï¼Ÿ")) {
                resetProgress();
            }
        }

        function updateCount() {
            document.getElementById('current-index').textContent = activeList.length > 0 ? currentIndex + 1 : 0;
            document.getElementById('total-count').textContent = activeList.length; 
        }
        
    </script>
</body>
</html>